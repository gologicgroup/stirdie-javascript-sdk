!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Stirdie=t():e.Stirdie=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,i=r;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}},function(e,t,r){var n=r(4),i=r(5),o=i;o.v1=n,o.v4=i,e.exports=o},function(e,t,r){var n;!function(i){"use strict";function o(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function s(e,t,r,n,i,s){return o((a=o(o(t,e),o(n,s)))<<(c=i)|a>>>32-c,r);var a,c}function a(e,t,r,n,i,o,a){return s(t&r|~t&n,e,t,i,o,a)}function c(e,t,r,n,i,o,a){return s(t&n|r&~n,e,t,i,o,a)}function u(e,t,r,n,i,o,a){return s(t^r^n,e,t,i,o,a)}function l(e,t,r,n,i,o,a){return s(r^(t|~n),e,t,i,o,a)}function h(e,t){var r,n,i,s,h;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var d=1732584193,p=-271733879,f=-1732584194,y=271733878;for(r=0;r<e.length;r+=16)n=d,i=p,s=f,h=y,d=a(d,p,f,y,e[r],7,-680876936),y=a(y,d,p,f,e[r+1],12,-389564586),f=a(f,y,d,p,e[r+2],17,606105819),p=a(p,f,y,d,e[r+3],22,-1044525330),d=a(d,p,f,y,e[r+4],7,-176418897),y=a(y,d,p,f,e[r+5],12,1200080426),f=a(f,y,d,p,e[r+6],17,-1473231341),p=a(p,f,y,d,e[r+7],22,-45705983),d=a(d,p,f,y,e[r+8],7,1770035416),y=a(y,d,p,f,e[r+9],12,-1958414417),f=a(f,y,d,p,e[r+10],17,-42063),p=a(p,f,y,d,e[r+11],22,-1990404162),d=a(d,p,f,y,e[r+12],7,1804603682),y=a(y,d,p,f,e[r+13],12,-40341101),f=a(f,y,d,p,e[r+14],17,-1502002290),d=c(d,p=a(p,f,y,d,e[r+15],22,1236535329),f,y,e[r+1],5,-165796510),y=c(y,d,p,f,e[r+6],9,-1069501632),f=c(f,y,d,p,e[r+11],14,643717713),p=c(p,f,y,d,e[r],20,-373897302),d=c(d,p,f,y,e[r+5],5,-701558691),y=c(y,d,p,f,e[r+10],9,38016083),f=c(f,y,d,p,e[r+15],14,-660478335),p=c(p,f,y,d,e[r+4],20,-405537848),d=c(d,p,f,y,e[r+9],5,568446438),y=c(y,d,p,f,e[r+14],9,-1019803690),f=c(f,y,d,p,e[r+3],14,-187363961),p=c(p,f,y,d,e[r+8],20,1163531501),d=c(d,p,f,y,e[r+13],5,-1444681467),y=c(y,d,p,f,e[r+2],9,-51403784),f=c(f,y,d,p,e[r+7],14,1735328473),d=u(d,p=c(p,f,y,d,e[r+12],20,-1926607734),f,y,e[r+5],4,-378558),y=u(y,d,p,f,e[r+8],11,-2022574463),f=u(f,y,d,p,e[r+11],16,1839030562),p=u(p,f,y,d,e[r+14],23,-35309556),d=u(d,p,f,y,e[r+1],4,-1530992060),y=u(y,d,p,f,e[r+4],11,1272893353),f=u(f,y,d,p,e[r+7],16,-155497632),p=u(p,f,y,d,e[r+10],23,-1094730640),d=u(d,p,f,y,e[r+13],4,681279174),y=u(y,d,p,f,e[r],11,-358537222),f=u(f,y,d,p,e[r+3],16,-722521979),p=u(p,f,y,d,e[r+6],23,76029189),d=u(d,p,f,y,e[r+9],4,-640364487),y=u(y,d,p,f,e[r+12],11,-421815835),f=u(f,y,d,p,e[r+15],16,530742520),d=l(d,p=u(p,f,y,d,e[r+2],23,-995338651),f,y,e[r],6,-198630844),y=l(y,d,p,f,e[r+7],10,1126891415),f=l(f,y,d,p,e[r+14],15,-1416354905),p=l(p,f,y,d,e[r+5],21,-57434055),d=l(d,p,f,y,e[r+12],6,1700485571),y=l(y,d,p,f,e[r+3],10,-1894986606),f=l(f,y,d,p,e[r+10],15,-1051523),p=l(p,f,y,d,e[r+1],21,-2054922799),d=l(d,p,f,y,e[r+8],6,1873313359),y=l(y,d,p,f,e[r+15],10,-30611744),f=l(f,y,d,p,e[r+6],15,-1560198380),p=l(p,f,y,d,e[r+13],21,1309151649),d=l(d,p,f,y,e[r+4],6,-145523070),y=l(y,d,p,f,e[r+11],10,-1120210379),f=l(f,y,d,p,e[r+2],15,718787259),p=l(p,f,y,d,e[r+9],21,-343485551),d=o(d,n),p=o(p,i),f=o(f,s),y=o(y,h);return[d,p,f,y]}function d(e){var t,r="",n=32*e.length;for(t=0;t<n;t+=8)r+=String.fromCharCode(e[t>>5]>>>t%32&255);return r}function p(e){var t,r=[];for(r[(e.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;var n=8*e.length;for(t=0;t<n;t+=8)r[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return r}function f(e){var t,r,n="";for(r=0;r<e.length;r+=1)t=e.charCodeAt(r),n+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return n}function y(e){return unescape(encodeURIComponent(e))}function v(e){return function(e){return d(h(p(e),8*e.length))}(y(e))}function m(e,t){return function(e,t){var r,n,i=p(e),o=[],s=[];for(o[15]=s[15]=void 0,i.length>16&&(i=h(i,8*e.length)),r=0;r<16;r+=1)o[r]=909522486^i[r],s[r]=1549556828^i[r];return n=h(o.concat(p(t)),512+8*t.length),d(h(s.concat(n),640))}(y(e),y(t))}function g(e,t,r){return t?r?m(t,e):f(m(t,e)):r?v(e):f(v(e))}void 0===(n=function(){return g}.call(t,r,t,e))||(e.exports=n)}()},function(e,t,r){var n,i,o=r(0),s=r(1),a=0,c=0;e.exports=function(e,t,r){var u=t&&r||0,l=t||[],h=(e=e||{}).node||n,d=void 0!==e.clockseq?e.clockseq:i;if(null==h||null==d){var p=o();null==h&&(h=n=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=i=16383&(p[6]<<8|p[7]))}var f=void 0!==e.msecs?e.msecs:(new Date).getTime(),y=void 0!==e.nsecs?e.nsecs:c+1,v=f-a+(y-c)/1e4;if(v<0&&void 0===e.clockseq&&(d=d+1&16383),(v<0||f>a)&&void 0===e.nsecs&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=f,c=y,i=d;var m=(1e4*(268435455&(f+=122192928e5))+y)%4294967296;l[u++]=m>>>24&255,l[u++]=m>>>16&255,l[u++]=m>>>8&255,l[u++]=255&m;var g=f/4294967296*1e4&268435455;l[u++]=g>>>8&255,l[u++]=255&g,l[u++]=g>>>24&15|16,l[u++]=g>>>16&255,l[u++]=d>>>8|128,l[u++]=255&d;for(var b=0;b<6;++b)l[u+b]=h[b];return t||s(l)}},function(e,t,r){var n=r(0),i=r(1);e.exports=function(e,t,r){var o=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},function(e,t,r){"use strict";r.r(t),r.d(t,"Stirdie",(function(){return x}));let n={http:{baseURL:"https://api.stirdie.com",keys:{publicKey:"/keys/public/:id",privateKey:"/keys/private"},storage:{uploadInitialise:"/storage/upload/:id",uploadPart:"/storage/upload",get:"/storage/:id",list:"/storage",copy:"/storage/:id/copy",move:"/storage/:id/move",delete:"/storage/:id"},transfer:{uploadInitialise:"/transfer/upload/:id",uploadPart:"/transfer/upload",get:"/transfer/:id",activity:"/transfer"}}};var i=()=>n,o=e=>{n=Object.assign(Object.assign({},n),e)};let s={};var a=()=>s,c=e=>{s=Object.assign(Object.assign({},s),e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function u(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}class l{constructor(e){this.keyManagementSerivce=e}getPublicKey(e="me",t){return u(this,void 0,void 0,(function*(){this.keyManagementSerivce.getPublicKey(e).then(e=>t(null,e)).catch(e=>t(e))}))}getPrivateKey(e){return u(this,void 0,void 0,(function*(){this.keyManagementSerivce.getPrivateKey().then(t=>e(null,t)).catch(t=>e(t))}))}}const h=e=>{let t="";for(var r=new Uint8Array(e),n=r.byteLength,i=0;i<n;i++)t+=String.fromCharCode(r[i]);return window.btoa(t)},d=e=>(e=>{let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})(window.atob(e));const p=(e,t="public")=>new Promise((r,n)=>{let i="encrypt",o="spki";"private"===t&&(i="decrypt",o="pkcs8");try{crypto.subtle.importKey(o,((e,t="public")=>(e=(e=(e=e.replace("\n","")).replace(`-----BEGIN ${t.toUpperCase()} KEY-----`,"")).replace(`-----END ${t.toUpperCase()} KEY-----`,""),d(e)))(e,t),{name:"RSA-OAEP",hash:"SHA-256"},!0,[i]).then(e=>r(e))}catch(e){console.log(e),n(e)}});var f=e=>new Promise((t,r)=>u(void 0,void 0,void 0,(function*(){try{const r=yield(i=e.pem,p(i,"public")),o=yield crypto.subtle.encrypt({name:"AES-GCM",iv:e.iv},e.key,e.buffer),s=yield(n=e.key,u(void 0,void 0,void 0,(function*(){return yield crypto.subtle.exportKey("raw",n)}))),a=yield crypto.subtle.encrypt({name:"RSA-OAEP"},r,s);return t({buffer:o,key:h(a)})}catch(e){return r(e)}var n,i})));const y=(e=256)=>new Promise(t=>u(void 0,void 0,void 0,(function*(){t(yield crypto.subtle.generateKey({name:"AES-GCM",length:e},!0,["encrypt","decrypt"]))})));class v{constructor(){this.subscribers={}}on(e,t){void 0===this.subscribers[e]&&(this.subscribers[e]=[]),this.subscribers[e].push(t)}emit(e,...t){void 0!==this.subscribers[e]&&this.subscribers[e].forEach(e=>{e(...t)})}}var m=r(2);const g=(e,t,r,n,i,o,s)=>((e,t,r,n)=>new Promise(i=>{const o=1===r?n.size:1024*t*1024,s=o*e,a=o*(e+1),c=new FileReader;c.onload=()=>{i(new Blob([c.result],{type:"application/octet-stream"}))},c.readAsArrayBuffer(n.slice(s,a))}))(r,n,i,o).then(n=>((e,t,r,n,i,o)=>{const s=new FormData;return s.append("file",r),o.uploadPart({file:s,fileId:e,hash:t,num:n+1,total:i})})(e,t,n,r,i,s));class b extends v{constructor(e,t,r,n,i,o,s,a,c,u=5){super(),this.uploadService=e,this.filename=t,this.size=r,this.checksum=o,this.symmetricalKey=s,this.iv=a,this.saveLocationStrategy=c,this.chunkSize=u,this._id=Object(m.v4)(),this._status="initalised",this._percentComplete=0,this.file=new Blob([n],{type:i}),this.chunksTotal=Math.ceil(this.file.size/(1024*this.chunkSize*1024))}get complete(){return"complete"===this._status}start(){try{this._status="started",this.emit("start",this),this.uploadService.uploadInit({fileId:this.getId(),filename:this.filename,size:this.size,iv:h(this.iv),symKey:this.symmetricalKey,contentMD5:this.checksum,contentType:this.file.type,saveLocation:this.saveLocationStrategy}).then(()=>u(this,void 0,void 0,(function*(){for(let e=0;e<this.chunksTotal;e++)try{yield g(this.getId(),this.checksum,e,this.chunkSize,this.chunksTotal,this.file,this.uploadService),this._percentComplete=Math.round(100/this.chunksTotal*(e+1)),this.emit("progress",this._percentComplete)}catch(e){this.emit("error",e)}this.emit("finish")}))).catch(e=>{throw e})}catch(e){this._status="error",this.emit("error",e),this.emit("finish")}}getId(){return this._id}getStatus(){return this._status}getPercentageComplete(){return this._percentComplete}onStart(e){this.on("start",e)}onProgress(e){this.on("progress",e)}onFinish(e){this.on("finish",e)}onError(e){this.on("error",e)}}class w extends v{constructor(e,t){super(),this.jobs={},this.jobsArray=[],this.errors=[],e.forEach(e=>{const r=new b(t,e.file.name,e.file.size,e.encryptedFile,e.checksum,e.file.type,e.symmetricalKey,e.iv,e.saveLocationStrategy);r.onProgress(()=>this.emit("progress",this.getProgress())),r.onError(e=>{this.errors.push(e),this.emit("error",{id:r.getId(),error:e})}),r.onFinish(()=>{this.emit("progress",this.getProgress()),0===this.jobsRemaining&&this.emit("finish")});const n=this.jobsArray.push(r);this.jobs[r.getId()]=this.jobsArray[n]})}get totalJobs(){return this.jobsArray.length}get jobsCompleted(){return this.jobsArray.filter(e=>e.complete).length}get jobsRemaining(){return this.jobsArray.filter(e=>!1===e.complete).length}get percentage(){return this.jobsArray.map(e=>e.getPercentageComplete()).reduce((e,t)=>e+t)/this.totalJobs}start(e){const t=[];this.jobsArray.forEach(e=>{t.push(new Promise(t=>t(e.start())))}),Promise.all(t).then(()=>{this.emit("start",this.getJobs()),e(null)},t=>{this.emit("error",t),e(t)})}getJobs(){return this.jobsArray}getJob(e){return void 0===this.jobs[e]?null:this.jobs[e]}getProgress(){return{total:this.totalJobs,percent:this.percentage,completed:this.jobsCompleted,remaining:this.jobsRemaining,errors:this.errors}}onStart(e){this.on("start",e)}onProgress(e){this.on("progress",e)}onFinish(e){this.on("finish",e)}onError(e){this.on("error",e)}}const P=(e,t,r)=>u(void 0,void 0,void 0,(function*(){try{const n=yield fetch(`${i().http.baseURL}${e}`,t);if(!n.ok)throw n;const o=yield n.json();if(void 0===o.statusCode)throw new Error("Invalid response");return r?r(null,o.payload):o.payload}catch(e){if(r)return r(e,null);throw e}}));var S=new class{setHeaders(e){const t=new Headers;if(t.append("Authorization","Bearer "+a().idToken),void 0!==e)for(let r in e)t.append(r,e[r]);return t}setFetchRequestOptions(e,t,r={}){return{method:e||"GET",headers:this.setHeaders(t.headers),body:t.body||null,redirect:t.redirect||"follow",signal:t.signal||null,follow:r.follow||20,timeout:r.timeout||0,compress:r.compress||!0,size:r.size||0,agent:r.agent||null}}get(e,t,r){return P(e,this.setFetchRequestOptions("GET",t),r)}post(e,t,r,n){return r=Object.assign(Object.assign({},r),{body:t}),P(e,this.setFetchRequestOptions("POST",r),n)}put(e,t,r,n){return r=Object.assign(Object.assign({},r),{body:t}),P(e,this.setFetchRequestOptions("PUT",r),n)}patch(e,t,r,n){return r=Object.assign(Object.assign({},r),{body:t}),P(e,this.setFetchRequestOptions("PATCH",r),n)}delete(e,t,r){return P(e,this.setFetchRequestOptions("DELETE",t),r)}};var k=new class{getPublicKey(e){return new Promise((t,r)=>{S.get(""+i().http.keys.publicKey.replace(":id",e),{},(e,n)=>e?r(e):t(n))})}getPrivateKey(){return new Promise((e,t)=>{S.get(""+i().http.keys.privateKey,{},(r,n)=>r?t(r):e(n))})}};var A=new class{uploadInit(e){return new Promise((t,r)=>{S.post(""+i().http.storage.uploadInitialise.replace(":id",e.fileId),{folderId:e.saveLocation,filename:e.filename,size:e.size,symKey:e.symKey,iv:e.iv,contentMD5:e.contentMD5,contentType:e.contentType},{},(e,n)=>e?r(e):t(n))})}uploadPart(e){return new Promise((t,r)=>{const n={"uploader-file-id":e.fileId,"uploader-chunks-total":e.total,"uploader-chunk-number":e.num,"uploader-chunk-hash":e.hash};S.post(""+i().http.storage.uploadPart,e.file,{headers:n},(e,n)=>e?r(e):t(n))})}get(e){return new Promise((t,r)=>{S.get(""+i().http.storage.get.replace(":id",e),{},(e,n)=>e?r(e):t(n))})}list(e){return new Promise((t,r)=>{S.get(`${i().http.storage.list}?folder=${e}`,{},(e,n)=>e?r(e):t(n))})}copy(e,t){return new Promise((r,n)=>{S.put(""+i().http.storage.copy.replace(":id",e),{key:t},{},(e,t)=>e?n(e):r(t))})}move(e,t){return new Promise((r,n)=>{S.patch(""+i().http.storage.move.replace(":id",e),{key:t},{},(e,t)=>e?n(e):r(t))})}delete(e){return new Promise((t,r)=>{S.delete(""+i().http.storage.delete.replace(":id",e),{},(e,n)=>e?r(e):t(n))})}},j=r(3),K=e=>j(e),C=e=>new Promise((t,r)=>u(void 0,void 0,void 0,(function*(){try{const r=yield(n=e.pem,p(n,"private")),i=yield crypto.subtle.decrypt({name:"RSA-OAEP"},r,e.encryptionKey),o={name:"AES-GCM",iv:e.iv},s=yield crypto.subtle.decrypt(o,yield crypto.subtle.importKey("raw",i,"AES-GCM",!0,["decrypt"]),e.buffer);return t(s)}catch(e){return r(e)}var n})));class O{constructor(e){this.storageService=e}upload(e,t,r){((e,t)=>new Promise((r,n)=>u(void 0,void 0,void 0,(function*(){try{const n=[],i=yield k.getPublicKey("me");for(let r of e)n.push(new Promise((e,n)=>{var o=new FileReader;o.onerror=e=>n(e),o.onload=n=>u(void 0,void 0,void 0,(function*(){const o=n.target.result,s=K((a=o,String.fromCharCode.apply(null,new Uint16Array(a))));var a;const c=yield y(),u=crypto.getRandomValues(new Uint8Array(12)),l=yield f({buffer:o,iv:u,key:c,pem:i});return e({file:r,encryptedFile:l.buffer,checksum:s,iv:u,symmetricalKey:l.key,saveLocationStrategy:t})})),o.readAsArrayBuffer(r)}));const o=yield Promise.all(n);return r(new w(o,A))}catch(e){return n(e)}}))))(e,t).then(e=>r(null,e)).catch(e=>r(e))}download(e,t){(e=>new Promise((t,r)=>u(void 0,void 0,void 0,(function*(){try{const r=yield A.get(e),n=yield k.getPrivateKey(),i=yield C({buffer:new Uint8Array(r.buffer).buffer,encryptionKey:d(r.encryptionKey),iv:d(r.iv),pem:n});return t(i)}catch(e){return r(e)}}))))(e).then(e=>t(null,e)).catch(e=>t(e))}get(e,t){this.storageService.get(e).then(e=>t(null,e)).catch(e=>t(e))}list(e,t){this.storageService.list(e).then(e=>t(null,e)).catch(e=>t(e))}copy(e,t,r){this.storageService.copy(e,t).then(e=>r(null,e)).catch(e=>r(e))}move(e,t,r){this.storageService.move(e,t).then(e=>r(null,e)).catch(e=>r(e))}delete(e,t){this.storageService.delete(e).then(e=>t(null,e)).catch(e=>t(e))}}var E=new class{uploadInit(e){return new Promise((t,r)=>{S.post(""+i().http.transfer.uploadInitialise.replace(":id",e.saveLocation),{fileId:e.fileId,filename:e.filename,size:e.size,symKey:e.symKey,iv:e.iv,contentMD5:e.contentMD5,contentType:e.contentType},{},(e,n)=>e?r(e):t(n))})}uploadPart(e){return new Promise((t,r)=>{const n={"uploader-file-id":e.fileId,"uploader-chunks-total":e.total,"uploader-chunk-number":e.num,"uploader-chunk-hash":e.hash};S.post(""+i().http.storage.uploadPart,e.file,{headers:n},(e,n)=>e?r(e):t(n))})}getTransfer(e){return new Promise((t,r)=>{S.get(""+i().http.transfer.get.replace(":id",e),{},(e,n)=>e?r(e):t(n))})}getActivity(){return new Promise((e,t)=>{S.get(""+i().http.transfer.activity,{},(r,n)=>r?t(r):e(n))})}};class R{constructor(e){this.transferService=e}send(e,t,r){((e,t)=>new Promise((r,n)=>u(void 0,void 0,void 0,(function*(){try{const n=[],i=yield k.getPublicKey(t);for(let r of e)n.push(new Promise((e,n)=>{var o=new FileReader;o.onerror=e=>n(e),o.onload=n=>u(void 0,void 0,void 0,(function*(){const o=n.target.result,s=K(o),a=yield y(),c=crypto.getRandomValues(new Uint8Array(12)),u=yield r.arrayBuffer(),l=yield f({buffer:u,iv:c,key:a,pem:i});return e({file:r,encryptedFile:l.buffer,checksum:s,iv:c,symmetricalKey:l.key,saveLocationStrategy:t})})),o.readAsBinaryString(r)}));const o=yield Promise.all(n);return r(new w(o,E))}catch(e){return n(e)}}))))(e,t).then(e=>r(null,e)).catch(e=>r(e))}retrieve(e,t){(e=>new Promise((t,r)=>u(void 0,void 0,void 0,(function*(){try{const r=yield E.getTransfer(e),n=yield k.getPrivateKey(),i=yield C({buffer:new Uint8Array(r.buffer).buffer,encryptionKey:d(r.encryptionKey),iv:d(r.iv),pem:n});return t(i)}catch(e){return r(e)}}))))(e).then(e=>t(null,e)).catch(e=>t(e))}activity(e){this.transferService.getActivity().then(t=>e(null,t)).catch(t=>e(t))}}class I{constructor(e,t={}){c(e),o(t),this.keys=new l(k),this.storage=new O(A),this.transfer=new R(E)}}function x(e,t,r){r(null,new I(e,t))}}])}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9TdGlyZGllL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9TdGlyZGllL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL1N0aXJkaWUvLi9ub2RlX21vZHVsZXMvdXVpZC9saWIvcm5nLWJyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vU3RpcmRpZS8uL25vZGVfbW9kdWxlcy91dWlkL2xpYi9ieXRlc1RvVXVpZC5qcyIsIndlYnBhY2s6Ly9TdGlyZGllLy4vbm9kZV9tb2R1bGVzL3V1aWQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vU3RpcmRpZS8uL25vZGVfbW9kdWxlcy9ibHVlaW1wLW1kNS9qcy9tZDUuanMiLCJ3ZWJwYWNrOi8vU3RpcmRpZS8uL25vZGVfbW9kdWxlcy91dWlkL3YxLmpzIiwid2VicGFjazovL1N0aXJkaWUvLi9ub2RlX21vZHVsZXMvdXVpZC92NC5qcyIsIndlYnBhY2s6Ly9TdGlyZGllLy4vc3JjL3N0aXJkaWUvY29uZmlndXJhdGlvbi50cyIsIndlYnBhY2s6Ly9TdGlyZGllLy4vc3JjL3N0aXJkaWUvY3JlZGVudGlhbHMudHMiLCJ3ZWJwYWNrOi8vU3RpcmRpZS8uL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCJ3ZWJwYWNrOi8vU3RpcmRpZS8uL3NyYy9zdGlyZGllL2tleXMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vU3RpcmRpZS8uL3NyYy9zdGlyZGllL3NoYXJlZC9oZWxwZXJzL2NvbnZlcnNpb24vYXJyYXlidWZmZXItdG8tYmFzZTY0LnRzIiwid2VicGFjazovL1N0aXJkaWUvLi9zcmMvc3RpcmRpZS9zaGFyZWQvaGVscGVycy9jb252ZXJzaW9uL2Jhc2U2NC10by1hcnJheWJ1ZmZlci50cyIsIndlYnBhY2s6Ly9TdGlyZGllLy4vc3JjL3N0aXJkaWUvc2hhcmVkL2hlbHBlcnMvY29udmVyc2lvbi9zdHJpbmctdG8tYXJyYXlidWZmZXIudHMiLCJ3ZWJwYWNrOi8vU3RpcmRpZS8uL3NyYy9zdGlyZGllL3NoYXJlZC9oZWxwZXJzL2NyeXB0by9hbGdvLnRzIiwid2VicGFjazovL1N0aXJkaWUvLi9zcmMvc3RpcmRpZS9zaGFyZWQvaGVscGVycy9jcnlwdG8vaW1wb3J0LWtleS50cyIsIndlYnBhY2s6Ly9TdGlyZGllLy4vc3JjL3N0aXJkaWUvc2hhcmVkL2hlbHBlcnMvY29udmVyc2lvbi9wZW0tdG8tYXJyYXlidWZmZXIudHMiLCJ3ZWJwYWNrOi8vU3RpcmRpZS8uL3NyYy9zdGlyZGllL3NoYXJlZC9oZWxwZXJzL2NyeXB0by9lbmNyeXB0LnRzIiwid2VicGFjazovL1N0aXJkaWUvLi9zcmMvc3RpcmRpZS9zaGFyZWQvaGVscGVycy9jcnlwdG8vZXhwb3J0LWtleS50cyIsIndlYnBhY2s6Ly9TdGlyZGllLy4vc3JjL3N0aXJkaWUvc2hhcmVkL2hlbHBlcnMvY3J5cHRvL2dlbmVyYXRlLWtleS50cyIsIndlYnBhY2s6Ly9TdGlyZGllLy4vc3JjL3N0aXJkaWUvc2hhcmVkL2hlbHBlcnMvZXZlbnRzLnRzIiwid2VicGFjazovL1N0aXJkaWUvLi9zcmMvc3RpcmRpZS9zaGFyZWQvbW9kZWxzL3VwbG9hZGVyL2dldENodW5rLnRzIiwid2VicGFjazovL1N0aXJkaWUvLi9zcmMvc3RpcmRpZS9zaGFyZWQvbW9kZWxzL3VwbG9hZGVyL3NlbmRDaHVua3MudHMiLCJ3ZWJwYWNrOi8vU3RpcmRpZS8uL3NyYy9zdGlyZGllL3NoYXJlZC9tb2RlbHMvdXBsb2FkZXIvc2VuZENodW5rLnRzIiwid2VicGFjazovL1N0aXJkaWUvLi9zcmMvc3RpcmRpZS9zaGFyZWQvbW9kZWxzL3VwbG9hZGVyL2ZpbGVDaHVua1VwbG9hZGVyLnRzIiwid2VicGFjazovL1N0aXJkaWUvLi9zcmMvc3RpcmRpZS9zaGFyZWQvaGVscGVycy9jb252ZXJzaW9uL2FycmF5YnVmZmVyLXRvLWJsb2IudHMiLCJ3ZWJwYWNrOi8vU3RpcmRpZS8uL3NyYy9zdGlyZGllL3NoYXJlZC9tb2RlbHMvdXBsb2FkLWpvYi50cyIsIndlYnBhY2s6Ly9TdGlyZGllLy4vc3JjL3N0aXJkaWUvc2hhcmVkL2hlbHBlcnMvaHR0cGNsaWVudC50cyIsIndlYnBhY2s6Ly9TdGlyZGllLy4vc3JjL3N0aXJkaWUvc2hhcmVkL3NlcnZpY2VzL2tleXMuc2VydmljZS50cyIsIndlYnBhY2s6Ly9TdGlyZGllLy4vc3JjL3N0aXJkaWUvc3RvcmFnZS9zZXJ2aWNlcy9zdG9yYWdlLnNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vU3RpcmRpZS8uL3NyYy9zdGlyZGllL3NoYXJlZC9oZWxwZXJzL2NyeXB0by9tZDUudHMiLCJ3ZWJwYWNrOi8vU3RpcmRpZS8uL3NyYy9zdGlyZGllL3NoYXJlZC9oZWxwZXJzL2NyeXB0by9kZWNyeXB0LnRzIiwid2VicGFjazovL1N0aXJkaWUvLi9zcmMvc3RpcmRpZS9zdG9yYWdlL2luZGV4LnRzIiwid2VicGFjazovL1N0aXJkaWUvLi9zcmMvc3RpcmRpZS9zdG9yYWdlL2Z1bmN0aW9ucy9zZW5kLWpvYi50cyIsIndlYnBhY2s6Ly9TdGlyZGllLy4vc3JjL3N0aXJkaWUvc2hhcmVkL2hlbHBlcnMvY29udmVyc2lvbi9hcnJheWJ1ZmZlci10by1zdHJpbmcudHMiLCJ3ZWJwYWNrOi8vU3RpcmRpZS8uL3NyYy9zdGlyZGllL3N0b3JhZ2UvZnVuY3Rpb25zL3JldHJpZXZlLWpvYi50cyIsIndlYnBhY2s6Ly9TdGlyZGllLy4vc3JjL3N0aXJkaWUvdHJhbnNmZXIvc2VydmljZXMvdHJhbnNmZXIuc2VydmljZS50cyIsIndlYnBhY2s6Ly9TdGlyZGllLy4vc3JjL3N0aXJkaWUvdHJhbnNmZXIvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vU3RpcmRpZS8uL3NyYy9zdGlyZGllL3RyYW5zZmVyL2Z1bmN0aW9ucy9zZW5kLWpvYi50cyIsIndlYnBhY2s6Ly9TdGlyZGllLy4vc3JjL3N0aXJkaWUvdHJhbnNmZXIvZnVuY3Rpb25zL3JldHJpZXZlLWpvYi50cyIsIndlYnBhY2s6Ly9TdGlyZGllLy4vc3JjL3N0aXJkaWUvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vU3RpcmRpZS8uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ3aW5kb3ciLCJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZ2V0UmFuZG9tVmFsdWVzIiwiY3J5cHRvIiwibXNDcnlwdG8iLCJybmRzOCIsIlVpbnQ4QXJyYXkiLCJybmRzIiwiQXJyYXkiLCJNYXRoIiwicmFuZG9tIiwiYnl0ZVRvSGV4IiwidG9TdHJpbmciLCJzdWJzdHIiLCJidWYiLCJvZmZzZXQiLCJidGgiLCJqb2luIiwidjEiLCJ2NCIsInV1aWQiLCIkIiwic2FmZUFkZCIsIngiLCJ5IiwibHN3IiwibWQ1Y21uIiwicSIsImEiLCJiIiwibnVtIiwiY250IiwibWQ1ZmYiLCJtZDVnZyIsIm1kNWhoIiwibWQ1aWkiLCJiaW5sTUQ1IiwibGVuIiwib2xkYSIsIm9sZGIiLCJvbGRjIiwib2xkZCIsImxlbmd0aCIsImJpbmwycnN0ciIsImlucHV0Iiwib3V0cHV0IiwibGVuZ3RoMzIiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJyc3RyMmJpbmwiLCJ1bmRlZmluZWQiLCJsZW5ndGg4IiwiY2hhckNvZGVBdCIsInJzdHIyaGV4IiwiY2hhckF0Iiwic3RyMnJzdHJVVEY4IiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJyYXdNRDUiLCJyc3RyTUQ1IiwicmF3SE1BQ01ENSIsImsiLCJkYXRhIiwiaGFzaCIsImJrZXkiLCJpcGFkIiwib3BhZCIsImNvbmNhdCIsInJzdHJITUFDTUQ1IiwibWQ1Iiwic3RyaW5nIiwicmF3IiwiX25vZGVJZCIsIl9jbG9ja3NlcSIsInJuZyIsImJ5dGVzVG9VdWlkIiwiX2xhc3RNU2VjcyIsIl9sYXN0TlNlY3MiLCJvcHRpb25zIiwibm9kZSIsImNsb2Nrc2VxIiwic2VlZEJ5dGVzIiwibXNlY3MiLCJEYXRlIiwiZ2V0VGltZSIsIm5zZWNzIiwiZHQiLCJFcnJvciIsInRsIiwidG1oIiwiaWkiLCJjb25maWd1cmF0aW9uIiwiaHR0cCIsImJhc2VVUkwiLCJrZXlzIiwicHVibGljS2V5IiwicHJpdmF0ZUtleSIsInN0b3JhZ2UiLCJ1cGxvYWRJbml0aWFsaXNlIiwidXBsb2FkUGFydCIsImxpc3QiLCJjb3B5IiwibW92ZSIsImRlbGV0ZSIsInRyYW5zZmVyIiwiYWN0aXZpdHkiLCJvdmVycmlkZXMiLCJjcmVkIiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJrZXlNYW5hZ2VtZW50U2VyaXZjZSIsInVzZXIiLCJjYWxsYmFjayIsInRoaXMiLCJnZXRQdWJsaWNLZXkiLCJjYXRjaCIsImVyciIsImdldFByaXZhdGVLZXkiLCJhcnJheUJ1ZmZlclRvQmFzZTY0IiwiYnVmZmVyIiwiYmluYXJ5IiwiYnl0ZUFycmF5IiwiYnl0ZUxlbmd0aCIsImJ0b2EiLCJiYXNlNjRUb0FycmF5QnVmZmVyIiwiYjY0Iiwic3RyIiwic3RyaW5nVG9BcnJheUJ1ZmZlciIsImF0b2IiLCJpbXBvcnRLZXkiLCJwZW0iLCJrZXlUeXBlIiwiZm9ybWF0Iiwic3VidGxlIiwicmVwbGFjZSIsInRvVXBwZXJDYXNlIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwib3B0cyIsImVuY0ZpbGUiLCJlbmNyeXB0IiwiaXYiLCJrZXlCdWZmZXIiLCJrZXlUb0VuY3J5cHQiLCJleHBvcnRLZXkiLCJlY25TeW1LZXlCdWZmZXIiLCJnZW5lcmF0ZUVuY3J5cHRpb25LZXkiLCJiaXRzIiwiZ2VuZXJhdGVLZXkiLCJFdmVudEVtaXR0ZXIiLCJzdWJzY3JpYmVycyIsImV2ZW50IiwicHVzaCIsImFyZ3MiLCJmb3JFYWNoIiwic2VuZENodW5rcyIsImZpbGVJZCIsImNoZWNrc3VtIiwiY2h1bmtDb3VudCIsImNodW5rU2l6ZSIsImNodW5rc1RvdGFsIiwiZmlsZSIsInVwbG9hZFNlcnZpY2UiLCJzaXplIiwic3RhcnQiLCJlbmQiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwiQmxvYiIsInR5cGUiLCJyZWFkQXNBcnJheUJ1ZmZlciIsInNsaWNlIiwiZ2V0Q2h1bmsiLCJibG9iIiwiY2h1bmsiLCJjaHVua1RvdGFsIiwiZm9ybSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwidG90YWwiLCJzZW5kQ2h1bmsiLCJmaWxlbmFtZSIsImVuY3J5cHRlZCIsImNvbnRlbnRUeXBlIiwic3ltbWV0cmljYWxLZXkiLCJzYXZlTG9jYXRpb25TdHJhdGVneSIsInN1cGVyIiwiX2lkIiwiX3N0YXR1cyIsIl9wZXJjZW50Q29tcGxldGUiLCJjZWlsIiwiZW1pdCIsInVwbG9hZEluaXQiLCJnZXRJZCIsInN5bUtleSIsImNvbnRlbnRNRDUiLCJzYXZlTG9jYXRpb24iLCJyb3VuZCIsIm9uIiwiZmlsZXMiLCJqb2JzIiwiam9ic0FycmF5IiwiZXJyb3JzIiwiam9iIiwiZW5jcnlwdGVkRmlsZSIsIm9uUHJvZ3Jlc3MiLCJnZXRQcm9ncmVzcyIsIm9uRXJyb3IiLCJpZCIsIm9uRmluaXNoIiwiam9ic1JlbWFpbmluZyIsImluZGV4IiwiZmlsdGVyIiwiY29tcGxldGUiLCJtYXAiLCJnZXRQZXJjZW50YWdlQ29tcGxldGUiLCJyZWR1Y2UiLCJ0b3RhbEpvYnMiLCJwcm9taXNlcyIsImFsbCIsImdldEpvYnMiLCJwZXJjZW50IiwicGVyY2VudGFnZSIsImNvbXBsZXRlZCIsImpvYnNDb21wbGV0ZWQiLCJyZW1haW5pbmciLCJleGVjdXRlIiwidXJsIiwiZmV0Y2giLCJvayIsImpzb24iLCJwYXlsb2FkIiwiaGVhZGVycyIsIm15SGVhZGVycyIsIkhlYWRlcnMiLCJpZFRva2VuIiwiZXh0T3B0cyIsIm1ldGhvZCIsInNldEhlYWRlcnMiLCJib2R5IiwicmVkaXJlY3QiLCJzaWduYWwiLCJmb2xsb3ciLCJ0aW1lb3V0IiwiY29tcHJlc3MiLCJhZ2VudCIsInNldEZldGNoUmVxdWVzdE9wdGlvbnMiLCJwYXJhbXMiLCJwb3N0IiwiZm9sZGVySWQiLCJmb2xkZXIiLCJjb3B5TG9jYXRpb24iLCJwdXQiLCJtb3ZlTG9jYXRpb24iLCJwYXRjaCIsImNvbnRlbnRzIiwic3ltZXRyaWNLZXkiLCJkZWNyeXB0IiwiZW5jcnlwdGlvbktleSIsImFsZ29yaXRobSIsImRlY3J5cHRlZEZpbGUiLCJzdG9yYWdlU2VydmljZSIsInJlcyIsInJlaiIsIm9uZXJyb3IiLCJjb250ZW50IiwidGFyZ2V0IiwiVWludDE2QXJyYXkiLCJ1cGxvYWRKb2JzIiwidXBsb2FkSm9iIiwidHJhbnNmZXJJRCIsInRyYW5zZmVyU2VydmljZSIsInNlbmRUb1N0aXJkaWVJRCIsInVzZXJJZCIsImFycmF5QnVmZmVyIiwicmVhZEFzQmluYXJ5U3RyaW5nIiwiZ2V0VHJhbnNmZXIiLCJnZXRBY3Rpdml0eSIsImNyZWRzIiwiY3JlZGVudGlhbHMiLCJjb25maWciXSwibWFwcGluZ3MiOiJDQUFBLFNBQTJDQSxFQUFNQyxHQUMxQixpQkFBWkMsU0FBMEMsaUJBQVhDLE9BQ3hDQSxPQUFPRCxRQUFVRCxJQUNRLG1CQUFYRyxRQUF5QkEsT0FBT0MsSUFDOUNELE9BQU8sR0FBSUgsR0FDZSxpQkFBWkMsUUFDZEEsUUFBaUIsUUFBSUQsSUFFckJELEVBQWMsUUFBSUMsSUFScEIs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QVFKLEVBQVNJLElBR2pDLFNBQVM0SixFQUFvQmhLLEdFWmxCLENBQUNnSyxHQUNMLElBQUk5SyxRQUFRLENBQU9DLEVBQVNDLElBQVcsb0NBQzFDLElBRUksTUFBTThELFFBQWEsRUFBdUJvSCxZQUFZTixHQUdoRDlJLFFBQVksRUFBSWIsZ0JBR2hCc0osUUFBZ0JSLEVBQVEsQ0FDMUI1SSxPQUFRLElBQUloSSxXQUFXMkssRUFBSzNDLFFBQVFBLE9BQ3BDNkksY0FBZXhJLEVBQW9Cc0MsRUFBS2tHLGVBQ3hDdEgsR0FBSWxCLEVBQW9Cc0MsRUFBS3BCLElBQzdCWixRQUdKLE9BQU8vQixFQUFRd0ssR0FDakIsTUFBT25JLEdBQ0wsT0FBT3BDLEVBQU9vQyxRRk5sQixDQUFZd0ksR0FDUHBLLEtBQU1GLEdBQVdNLEVBQVMsS0FBTU4sSUFDaENTLE1BQU9DLEdBQVFKLEVBQVNJLElBR2pDLFNBQVNKLEdBQ0xDLEtBQUtnSyxnQkFDQU0sY0FDQTNLLEtBQU1GLEdBQVdNLEVBQVMsS0FBTU4sSUFDaENTLE1BQU9DLEdBQVFKLEVBQVNJLEtHakI5QixNQUFNLEVBS1QsWUFBWW9LLEVBQW9Cek4sRUFBVSxJQUN0QyxFQUFnQnlOLEdBQ2hCLEVBQWtCek4sR0FDbEJrRCxLQUFLbEMsS0FBTyxJQUFJLEVBQXFCLEdBQ3JDa0MsS0FBSy9CLFFBQVUsSUFBSSxFQUFlLEdBQ2xDK0IsS0FBS3hCLFNBQVcsSUFBSSxFQUFlLElDaEJwQyxTQUFTLEVBQ1pnTSxFQUNBQyxFQUNBMUssR0FFQUEsRUFBUyxLQUFNLElBQUksRUFBWXlLLEVBQWFDIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiU3RpcmRpZVwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJTdGlyZGllXCJdID0gZmFjdG9yeSgpO1xufSkod2luZG93LCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNik7XG4iLCIvLyBVbmlxdWUgSUQgY3JlYXRpb24gcmVxdWlyZXMgYSBoaWdoIHF1YWxpdHkgcmFuZG9tICMgZ2VuZXJhdG9yLiAgSW4gdGhlXG4vLyBicm93c2VyIHRoaXMgaXMgYSBsaXR0bGUgY29tcGxpY2F0ZWQgZHVlIHRvIHVua25vd24gcXVhbGl0eSBvZiBNYXRoLnJhbmRvbSgpXG4vLyBhbmQgaW5jb25zaXN0ZW50IHN1cHBvcnQgZm9yIHRoZSBgY3J5cHRvYCBBUEkuICBXZSBkbyB0aGUgYmVzdCB3ZSBjYW4gdmlhXG4vLyBmZWF0dXJlLWRldGVjdGlvblxuXG4vLyBnZXRSYW5kb21WYWx1ZXMgbmVlZHMgdG8gYmUgaW52b2tlZCBpbiBhIGNvbnRleHQgd2hlcmUgXCJ0aGlzXCIgaXMgYSBDcnlwdG9cbi8vIGltcGxlbWVudGF0aW9uLiBBbHNvLCBmaW5kIHRoZSBjb21wbGV0ZSBpbXBsZW1lbnRhdGlvbiBvZiBjcnlwdG8gb24gSUUxMS5cbnZhciBnZXRSYW5kb21WYWx1ZXMgPSAodHlwZW9mKGNyeXB0bykgIT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mKG1zQ3J5cHRvKSAhPSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93Lm1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcyA9PSAnZnVuY3Rpb24nICYmIG1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKG1zQ3J5cHRvKSk7XG5cbmlmIChnZXRSYW5kb21WYWx1ZXMpIHtcbiAgLy8gV0hBVFdHIGNyeXB0byBSTkcgLSBodHRwOi8vd2lraS53aGF0d2cub3JnL3dpa2kvQ3J5cHRvXG4gIHZhciBybmRzOCA9IG5ldyBVaW50OEFycmF5KDE2KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gd2hhdHdnUk5HKCkge1xuICAgIGdldFJhbmRvbVZhbHVlcyhybmRzOCk7XG4gICAgcmV0dXJuIHJuZHM4O1xuICB9O1xufSBlbHNlIHtcbiAgLy8gTWF0aC5yYW5kb20oKS1iYXNlZCAoUk5HKVxuICAvL1xuICAvLyBJZiBhbGwgZWxzZSBmYWlscywgdXNlIE1hdGgucmFuZG9tKCkuICBJdCdzIGZhc3QsIGJ1dCBpcyBvZiB1bnNwZWNpZmllZFxuICAvLyBxdWFsaXR5LlxuICB2YXIgcm5kcyA9IG5ldyBBcnJheSgxNik7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBtYXRoUk5HKCkge1xuICAgIGZvciAodmFyIGkgPSAwLCByOyBpIDwgMTY7IGkrKykge1xuICAgICAgaWYgKChpICYgMHgwMykgPT09IDApIHIgPSBNYXRoLnJhbmRvbSgpICogMHgxMDAwMDAwMDA7XG4gICAgICBybmRzW2ldID0gciA+Pj4gKChpICYgMHgwMykgPDwgMykgJiAweGZmO1xuICAgIH1cblxuICAgIHJldHVybiBybmRzO1xuICB9O1xufVxuIiwiLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG52YXIgYnl0ZVRvSGV4ID0gW107XG5mb3IgKHZhciBpID0gMDsgaSA8IDI1NjsgKytpKSB7XG4gIGJ5dGVUb0hleFtpXSA9IChpICsgMHgxMDApLnRvU3RyaW5nKDE2KS5zdWJzdHIoMSk7XG59XG5cbmZ1bmN0aW9uIGJ5dGVzVG9VdWlkKGJ1Ziwgb2Zmc2V0KSB7XG4gIHZhciBpID0gb2Zmc2V0IHx8IDA7XG4gIHZhciBidGggPSBieXRlVG9IZXg7XG4gIC8vIGpvaW4gdXNlZCB0byBmaXggbWVtb3J5IGlzc3VlIGNhdXNlZCBieSBjb25jYXRlbmF0aW9uOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0zMTc1I2M0XG4gIHJldHVybiAoW2J0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sIFxuXHRidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCAnLScsXG5cdGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sICctJyxcblx0YnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgJy0nLFxuXHRidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCAnLScsXG5cdGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sXG5cdGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sXG5cdGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV1dKS5qb2luKCcnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBieXRlc1RvVXVpZDtcbiIsInZhciB2MSA9IHJlcXVpcmUoJy4vdjEnKTtcbnZhciB2NCA9IHJlcXVpcmUoJy4vdjQnKTtcblxudmFyIHV1aWQgPSB2NDtcbnV1aWQudjEgPSB2MTtcbnV1aWQudjQgPSB2NDtcblxubW9kdWxlLmV4cG9ydHMgPSB1dWlkO1xuIiwiLypcbiAqIEphdmFTY3JpcHQgTUQ1XG4gKiBodHRwczovL2dpdGh1Yi5jb20vYmx1ZWltcC9KYXZhU2NyaXB0LU1ENVxuICpcbiAqIENvcHlyaWdodCAyMDExLCBTZWJhc3RpYW4gVHNjaGFuXG4gKiBodHRwczovL2JsdWVpbXAubmV0XG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlOlxuICogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVRcbiAqXG4gKiBCYXNlZCBvblxuICogQSBKYXZhU2NyaXB0IGltcGxlbWVudGF0aW9uIG9mIHRoZSBSU0EgRGF0YSBTZWN1cml0eSwgSW5jLiBNRDUgTWVzc2FnZVxuICogRGlnZXN0IEFsZ29yaXRobSwgYXMgZGVmaW5lZCBpbiBSRkMgMTMyMS5cbiAqIFZlcnNpb24gMi4yIENvcHlyaWdodCAoQykgUGF1bCBKb2huc3RvbiAxOTk5IC0gMjAwOVxuICogT3RoZXIgY29udHJpYnV0b3JzOiBHcmVnIEhvbHQsIEFuZHJldyBLZXBlcnQsIFlkbmFyLCBMb3N0aW5ldFxuICogRGlzdHJpYnV0ZWQgdW5kZXIgdGhlIEJTRCBMaWNlbnNlXG4gKiBTZWUgaHR0cDovL3BhamhvbWUub3JnLnVrL2NyeXB0L21kNSBmb3IgbW9yZSBpbmZvLlxuICovXG5cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuLyogZXNsaW50LWRpc2FibGUgc3RyaWN0ICovXG5cbjsoZnVuY3Rpb24gKCQpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgLyoqXG4gICAqIEFkZCBpbnRlZ2Vycywgd3JhcHBpbmcgYXQgMl4zMi5cbiAgICogVGhpcyB1c2VzIDE2LWJpdCBvcGVyYXRpb25zIGludGVybmFsbHkgdG8gd29yayBhcm91bmQgYnVncyBpbiBpbnRlcnByZXRlcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IEZpcnN0IGludGVnZXJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgU2Vjb25kIGludGVnZXJcbiAgICogQHJldHVybnMge251bWJlcn0gU3VtXG4gICAqL1xuICBmdW5jdGlvbiBzYWZlQWRkKHgsIHkpIHtcbiAgICB2YXIgbHN3ID0gKHggJiAweGZmZmYpICsgKHkgJiAweGZmZmYpXG4gICAgdmFyIG1zdyA9ICh4ID4+IDE2KSArICh5ID4+IDE2KSArIChsc3cgPj4gMTYpXG4gICAgcmV0dXJuIChtc3cgPDwgMTYpIHwgKGxzdyAmIDB4ZmZmZilcbiAgfVxuXG4gIC8qKlxuICAgKiBCaXR3aXNlIHJvdGF0ZSBhIDMyLWJpdCBudW1iZXIgdG8gdGhlIGxlZnQuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBudW0gMzItYml0IG51bWJlclxuICAgKiBAcGFyYW0ge251bWJlcn0gY250IFJvdGF0aW9uIGNvdW50XG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFJvdGF0ZWQgbnVtYmVyXG4gICAqL1xuICBmdW5jdGlvbiBiaXRSb3RhdGVMZWZ0KG51bSwgY250KSB7XG4gICAgcmV0dXJuIChudW0gPDwgY250KSB8IChudW0gPj4+ICgzMiAtIGNudCkpXG4gIH1cblxuICAvKipcbiAgICogQmFzaWMgb3BlcmF0aW9uIHRoZSBhbGdvcml0aG0gdXNlcy5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHEgcVxuICAgKiBAcGFyYW0ge251bWJlcn0gYSBhXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBiIGJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggeFxuICAgKiBAcGFyYW0ge251bWJlcn0gcyBzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0IHRcbiAgICogQHJldHVybnMge251bWJlcn0gUmVzdWx0XG4gICAqL1xuICBmdW5jdGlvbiBtZDVjbW4ocSwgYSwgYiwgeCwgcywgdCkge1xuICAgIHJldHVybiBzYWZlQWRkKGJpdFJvdGF0ZUxlZnQoc2FmZUFkZChzYWZlQWRkKGEsIHEpLCBzYWZlQWRkKHgsIHQpKSwgcyksIGIpXG4gIH1cbiAgLyoqXG4gICAqIEJhc2ljIG9wZXJhdGlvbiB0aGUgYWxnb3JpdGhtIHVzZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBhIGFcbiAgICogQHBhcmFtIHtudW1iZXJ9IGIgYlxuICAgKiBAcGFyYW0ge251bWJlcn0gYyBjXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkIGRcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggeFxuICAgKiBAcGFyYW0ge251bWJlcn0gcyBzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0IHRcbiAgICogQHJldHVybnMge251bWJlcn0gUmVzdWx0XG4gICAqL1xuICBmdW5jdGlvbiBtZDVmZihhLCBiLCBjLCBkLCB4LCBzLCB0KSB7XG4gICAgcmV0dXJuIG1kNWNtbigoYiAmIGMpIHwgKH5iICYgZCksIGEsIGIsIHgsIHMsIHQpXG4gIH1cbiAgLyoqXG4gICAqIEJhc2ljIG9wZXJhdGlvbiB0aGUgYWxnb3JpdGhtIHVzZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBhIGFcbiAgICogQHBhcmFtIHtudW1iZXJ9IGIgYlxuICAgKiBAcGFyYW0ge251bWJlcn0gYyBjXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkIGRcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggeFxuICAgKiBAcGFyYW0ge251bWJlcn0gcyBzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0IHRcbiAgICogQHJldHVybnMge251bWJlcn0gUmVzdWx0XG4gICAqL1xuICBmdW5jdGlvbiBtZDVnZyhhLCBiLCBjLCBkLCB4LCBzLCB0KSB7XG4gICAgcmV0dXJuIG1kNWNtbigoYiAmIGQpIHwgKGMgJiB+ZCksIGEsIGIsIHgsIHMsIHQpXG4gIH1cbiAgLyoqXG4gICAqIEJhc2ljIG9wZXJhdGlvbiB0aGUgYWxnb3JpdGhtIHVzZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBhIGFcbiAgICogQHBhcmFtIHtudW1iZXJ9IGIgYlxuICAgKiBAcGFyYW0ge251bWJlcn0gYyBjXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkIGRcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggeFxuICAgKiBAcGFyYW0ge251bWJlcn0gcyBzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0IHRcbiAgICogQHJldHVybnMge251bWJlcn0gUmVzdWx0XG4gICAqL1xuICBmdW5jdGlvbiBtZDVoaChhLCBiLCBjLCBkLCB4LCBzLCB0KSB7XG4gICAgcmV0dXJuIG1kNWNtbihiIF4gYyBeIGQsIGEsIGIsIHgsIHMsIHQpXG4gIH1cbiAgLyoqXG4gICAqIEJhc2ljIG9wZXJhdGlvbiB0aGUgYWxnb3JpdGhtIHVzZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBhIGFcbiAgICogQHBhcmFtIHtudW1iZXJ9IGIgYlxuICAgKiBAcGFyYW0ge251bWJlcn0gYyBjXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkIGRcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggeFxuICAgKiBAcGFyYW0ge251bWJlcn0gcyBzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0IHRcbiAgICogQHJldHVybnMge251bWJlcn0gUmVzdWx0XG4gICAqL1xuICBmdW5jdGlvbiBtZDVpaShhLCBiLCBjLCBkLCB4LCBzLCB0KSB7XG4gICAgcmV0dXJuIG1kNWNtbihjIF4gKGIgfCB+ZCksIGEsIGIsIHgsIHMsIHQpXG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHRoZSBNRDUgb2YgYW4gYXJyYXkgb2YgbGl0dGxlLWVuZGlhbiB3b3JkcywgYW5kIGEgYml0IGxlbmd0aC5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0geCBBcnJheSBvZiBsaXR0bGUtZW5kaWFuIHdvcmRzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBsZW4gQml0IGxlbmd0aFxuICAgKiBAcmV0dXJucyB7QXJyYXk8bnVtYmVyPn0gTUQ1IEFycmF5XG4gICAqL1xuICBmdW5jdGlvbiBiaW5sTUQ1KHgsIGxlbikge1xuICAgIC8qIGFwcGVuZCBwYWRkaW5nICovXG4gICAgeFtsZW4gPj4gNV0gfD0gMHg4MCA8PCBsZW4gJSAzMlxuICAgIHhbKCgobGVuICsgNjQpID4+PiA5KSA8PCA0KSArIDE0XSA9IGxlblxuXG4gICAgdmFyIGlcbiAgICB2YXIgb2xkYVxuICAgIHZhciBvbGRiXG4gICAgdmFyIG9sZGNcbiAgICB2YXIgb2xkZFxuICAgIHZhciBhID0gMTczMjU4NDE5M1xuICAgIHZhciBiID0gLTI3MTczMzg3OVxuICAgIHZhciBjID0gLTE3MzI1ODQxOTRcbiAgICB2YXIgZCA9IDI3MTczMzg3OFxuXG4gICAgZm9yIChpID0gMDsgaSA8IHgubGVuZ3RoOyBpICs9IDE2KSB7XG4gICAgICBvbGRhID0gYVxuICAgICAgb2xkYiA9IGJcbiAgICAgIG9sZGMgPSBjXG4gICAgICBvbGRkID0gZFxuXG4gICAgICBhID0gbWQ1ZmYoYSwgYiwgYywgZCwgeFtpXSwgNywgLTY4MDg3NjkzNilcbiAgICAgIGQgPSBtZDVmZihkLCBhLCBiLCBjLCB4W2kgKyAxXSwgMTIsIC0zODk1NjQ1ODYpXG4gICAgICBjID0gbWQ1ZmYoYywgZCwgYSwgYiwgeFtpICsgMl0sIDE3LCA2MDYxMDU4MTkpXG4gICAgICBiID0gbWQ1ZmYoYiwgYywgZCwgYSwgeFtpICsgM10sIDIyLCAtMTA0NDUyNTMzMClcbiAgICAgIGEgPSBtZDVmZihhLCBiLCBjLCBkLCB4W2kgKyA0XSwgNywgLTE3NjQxODg5NylcbiAgICAgIGQgPSBtZDVmZihkLCBhLCBiLCBjLCB4W2kgKyA1XSwgMTIsIDEyMDAwODA0MjYpXG4gICAgICBjID0gbWQ1ZmYoYywgZCwgYSwgYiwgeFtpICsgNl0sIDE3LCAtMTQ3MzIzMTM0MSlcbiAgICAgIGIgPSBtZDVmZihiLCBjLCBkLCBhLCB4W2kgKyA3XSwgMjIsIC00NTcwNTk4MylcbiAgICAgIGEgPSBtZDVmZihhLCBiLCBjLCBkLCB4W2kgKyA4XSwgNywgMTc3MDAzNTQxNilcbiAgICAgIGQgPSBtZDVmZihkLCBhLCBiLCBjLCB4W2kgKyA5XSwgMTIsIC0xOTU4NDE0NDE3KVxuICAgICAgYyA9IG1kNWZmKGMsIGQsIGEsIGIsIHhbaSArIDEwXSwgMTcsIC00MjA2MylcbiAgICAgIGIgPSBtZDVmZihiLCBjLCBkLCBhLCB4W2kgKyAxMV0sIDIyLCAtMTk5MDQwNDE2MilcbiAgICAgIGEgPSBtZDVmZihhLCBiLCBjLCBkLCB4W2kgKyAxMl0sIDcsIDE4MDQ2MDM2ODIpXG4gICAgICBkID0gbWQ1ZmYoZCwgYSwgYiwgYywgeFtpICsgMTNdLCAxMiwgLTQwMzQxMTAxKVxuICAgICAgYyA9IG1kNWZmKGMsIGQsIGEsIGIsIHhbaSArIDE0XSwgMTcsIC0xNTAyMDAyMjkwKVxuICAgICAgYiA9IG1kNWZmKGIsIGMsIGQsIGEsIHhbaSArIDE1XSwgMjIsIDEyMzY1MzUzMjkpXG5cbiAgICAgIGEgPSBtZDVnZyhhLCBiLCBjLCBkLCB4W2kgKyAxXSwgNSwgLTE2NTc5NjUxMClcbiAgICAgIGQgPSBtZDVnZyhkLCBhLCBiLCBjLCB4W2kgKyA2XSwgOSwgLTEwNjk1MDE2MzIpXG4gICAgICBjID0gbWQ1Z2coYywgZCwgYSwgYiwgeFtpICsgMTFdLCAxNCwgNjQzNzE3NzEzKVxuICAgICAgYiA9IG1kNWdnKGIsIGMsIGQsIGEsIHhbaV0sIDIwLCAtMzczODk3MzAyKVxuICAgICAgYSA9IG1kNWdnKGEsIGIsIGMsIGQsIHhbaSArIDVdLCA1LCAtNzAxNTU4NjkxKVxuICAgICAgZCA9IG1kNWdnKGQsIGEsIGIsIGMsIHhbaSArIDEwXSwgOSwgMzgwMTYwODMpXG4gICAgICBjID0gbWQ1Z2coYywgZCwgYSwgYiwgeFtpICsgMTVdLCAxNCwgLTY2MDQ3ODMzNSlcbiAgICAgIGIgPSBtZDVnZyhiLCBjLCBkLCBhLCB4W2kgKyA0XSwgMjAsIC00MDU1Mzc4NDgpXG4gICAgICBhID0gbWQ1Z2coYSwgYiwgYywgZCwgeFtpICsgOV0sIDUsIDU2ODQ0NjQzOClcbiAgICAgIGQgPSBtZDVnZyhkLCBhLCBiLCBjLCB4W2kgKyAxNF0sIDksIC0xMDE5ODAzNjkwKVxuICAgICAgYyA9IG1kNWdnKGMsIGQsIGEsIGIsIHhbaSArIDNdLCAxNCwgLTE4NzM2Mzk2MSlcbiAgICAgIGIgPSBtZDVnZyhiLCBjLCBkLCBhLCB4W2kgKyA4XSwgMjAsIDExNjM1MzE1MDEpXG4gICAgICBhID0gbWQ1Z2coYSwgYiwgYywgZCwgeFtpICsgMTNdLCA1LCAtMTQ0NDY4MTQ2NylcbiAgICAgIGQgPSBtZDVnZyhkLCBhLCBiLCBjLCB4W2kgKyAyXSwgOSwgLTUxNDAzNzg0KVxuICAgICAgYyA9IG1kNWdnKGMsIGQsIGEsIGIsIHhbaSArIDddLCAxNCwgMTczNTMyODQ3MylcbiAgICAgIGIgPSBtZDVnZyhiLCBjLCBkLCBhLCB4W2kgKyAxMl0sIDIwLCAtMTkyNjYwNzczNClcblxuICAgICAgYSA9IG1kNWhoKGEsIGIsIGMsIGQsIHhbaSArIDVdLCA0LCAtMzc4NTU4KVxuICAgICAgZCA9IG1kNWhoKGQsIGEsIGIsIGMsIHhbaSArIDhdLCAxMSwgLTIwMjI1NzQ0NjMpXG4gICAgICBjID0gbWQ1aGgoYywgZCwgYSwgYiwgeFtpICsgMTFdLCAxNiwgMTgzOTAzMDU2MilcbiAgICAgIGIgPSBtZDVoaChiLCBjLCBkLCBhLCB4W2kgKyAxNF0sIDIzLCAtMzUzMDk1NTYpXG4gICAgICBhID0gbWQ1aGgoYSwgYiwgYywgZCwgeFtpICsgMV0sIDQsIC0xNTMwOTkyMDYwKVxuICAgICAgZCA9IG1kNWhoKGQsIGEsIGIsIGMsIHhbaSArIDRdLCAxMSwgMTI3Mjg5MzM1MylcbiAgICAgIGMgPSBtZDVoaChjLCBkLCBhLCBiLCB4W2kgKyA3XSwgMTYsIC0xNTU0OTc2MzIpXG4gICAgICBiID0gbWQ1aGgoYiwgYywgZCwgYSwgeFtpICsgMTBdLCAyMywgLTEwOTQ3MzA2NDApXG4gICAgICBhID0gbWQ1aGgoYSwgYiwgYywgZCwgeFtpICsgMTNdLCA0LCA2ODEyNzkxNzQpXG4gICAgICBkID0gbWQ1aGgoZCwgYSwgYiwgYywgeFtpXSwgMTEsIC0zNTg1MzcyMjIpXG4gICAgICBjID0gbWQ1aGgoYywgZCwgYSwgYiwgeFtpICsgM10sIDE2LCAtNzIyNTIxOTc5KVxuICAgICAgYiA9IG1kNWhoKGIsIGMsIGQsIGEsIHhbaSArIDZdLCAyMywgNzYwMjkxODkpXG4gICAgICBhID0gbWQ1aGgoYSwgYiwgYywgZCwgeFtpICsgOV0sIDQsIC02NDAzNjQ0ODcpXG4gICAgICBkID0gbWQ1aGgoZCwgYSwgYiwgYywgeFtpICsgMTJdLCAxMSwgLTQyMTgxNTgzNSlcbiAgICAgIGMgPSBtZDVoaChjLCBkLCBhLCBiLCB4W2kgKyAxNV0sIDE2LCA1MzA3NDI1MjApXG4gICAgICBiID0gbWQ1aGgoYiwgYywgZCwgYSwgeFtpICsgMl0sIDIzLCAtOTk1MzM4NjUxKVxuXG4gICAgICBhID0gbWQ1aWkoYSwgYiwgYywgZCwgeFtpXSwgNiwgLTE5ODYzMDg0NClcbiAgICAgIGQgPSBtZDVpaShkLCBhLCBiLCBjLCB4W2kgKyA3XSwgMTAsIDExMjY4OTE0MTUpXG4gICAgICBjID0gbWQ1aWkoYywgZCwgYSwgYiwgeFtpICsgMTRdLCAxNSwgLTE0MTYzNTQ5MDUpXG4gICAgICBiID0gbWQ1aWkoYiwgYywgZCwgYSwgeFtpICsgNV0sIDIxLCAtNTc0MzQwNTUpXG4gICAgICBhID0gbWQ1aWkoYSwgYiwgYywgZCwgeFtpICsgMTJdLCA2LCAxNzAwNDg1NTcxKVxuICAgICAgZCA9IG1kNWlpKGQsIGEsIGIsIGMsIHhbaSArIDNdLCAxMCwgLTE4OTQ5ODY2MDYpXG4gICAgICBjID0gbWQ1aWkoYywgZCwgYSwgYiwgeFtpICsgMTBdLCAxNSwgLTEwNTE1MjMpXG4gICAgICBiID0gbWQ1aWkoYiwgYywgZCwgYSwgeFtpICsgMV0sIDIxLCAtMjA1NDkyMjc5OSlcbiAgICAgIGEgPSBtZDVpaShhLCBiLCBjLCBkLCB4W2kgKyA4XSwgNiwgMTg3MzMxMzM1OSlcbiAgICAgIGQgPSBtZDVpaShkLCBhLCBiLCBjLCB4W2kgKyAxNV0sIDEwLCAtMzA2MTE3NDQpXG4gICAgICBjID0gbWQ1aWkoYywgZCwgYSwgYiwgeFtpICsgNl0sIDE1LCAtMTU2MDE5ODM4MClcbiAgICAgIGIgPSBtZDVpaShiLCBjLCBkLCBhLCB4W2kgKyAxM10sIDIxLCAxMzA5MTUxNjQ5KVxuICAgICAgYSA9IG1kNWlpKGEsIGIsIGMsIGQsIHhbaSArIDRdLCA2LCAtMTQ1NTIzMDcwKVxuICAgICAgZCA9IG1kNWlpKGQsIGEsIGIsIGMsIHhbaSArIDExXSwgMTAsIC0xMTIwMjEwMzc5KVxuICAgICAgYyA9IG1kNWlpKGMsIGQsIGEsIGIsIHhbaSArIDJdLCAxNSwgNzE4Nzg3MjU5KVxuICAgICAgYiA9IG1kNWlpKGIsIGMsIGQsIGEsIHhbaSArIDldLCAyMSwgLTM0MzQ4NTU1MSlcblxuICAgICAgYSA9IHNhZmVBZGQoYSwgb2xkYSlcbiAgICAgIGIgPSBzYWZlQWRkKGIsIG9sZGIpXG4gICAgICBjID0gc2FmZUFkZChjLCBvbGRjKVxuICAgICAgZCA9IHNhZmVBZGQoZCwgb2xkZClcbiAgICB9XG4gICAgcmV0dXJuIFthLCBiLCBjLCBkXVxuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgYW4gYXJyYXkgb2YgbGl0dGxlLWVuZGlhbiB3b3JkcyB0byBhIHN0cmluZ1xuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGlucHV0IE1ENSBBcnJheVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBNRDUgc3RyaW5nXG4gICAqL1xuICBmdW5jdGlvbiBiaW5sMnJzdHIoaW5wdXQpIHtcbiAgICB2YXIgaVxuICAgIHZhciBvdXRwdXQgPSAnJ1xuICAgIHZhciBsZW5ndGgzMiA9IGlucHV0Lmxlbmd0aCAqIDMyXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDMyOyBpICs9IDgpIHtcbiAgICAgIG91dHB1dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChpbnB1dFtpID4+IDVdID4+PiBpICUgMzIpICYgMHhmZilcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgYSByYXcgc3RyaW5nIHRvIGFuIGFycmF5IG9mIGxpdHRsZS1lbmRpYW4gd29yZHNcbiAgICogQ2hhcmFjdGVycyA+MjU1IGhhdmUgdGhlaXIgaGlnaC1ieXRlIHNpbGVudGx5IGlnbm9yZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpbnB1dCBSYXcgaW5wdXQgc3RyaW5nXG4gICAqIEByZXR1cm5zIHtBcnJheTxudW1iZXI+fSBBcnJheSBvZiBsaXR0bGUtZW5kaWFuIHdvcmRzXG4gICAqL1xuICBmdW5jdGlvbiByc3RyMmJpbmwoaW5wdXQpIHtcbiAgICB2YXIgaVxuICAgIHZhciBvdXRwdXQgPSBbXVxuICAgIG91dHB1dFsoaW5wdXQubGVuZ3RoID4+IDIpIC0gMV0gPSB1bmRlZmluZWRcbiAgICBmb3IgKGkgPSAwOyBpIDwgb3V0cHV0Lmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBvdXRwdXRbaV0gPSAwXG4gICAgfVxuICAgIHZhciBsZW5ndGg4ID0gaW5wdXQubGVuZ3RoICogOFxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg4OyBpICs9IDgpIHtcbiAgICAgIG91dHB1dFtpID4+IDVdIHw9IChpbnB1dC5jaGFyQ29kZUF0KGkgLyA4KSAmIDB4ZmYpIDw8IGkgJSAzMlxuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHRoZSBNRDUgb2YgYSByYXcgc3RyaW5nXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzIElucHV0IHN0cmluZ1xuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSYXcgTUQ1IHN0cmluZ1xuICAgKi9cbiAgZnVuY3Rpb24gcnN0ck1ENShzKSB7XG4gICAgcmV0dXJuIGJpbmwycnN0cihiaW5sTUQ1KHJzdHIyYmlubChzKSwgcy5sZW5ndGggKiA4KSlcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGVzIHRoZSBITUFDLU1ENSBvZiBhIGtleSBhbmQgc29tZSBkYXRhIChyYXcgc3RyaW5ncylcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBITUFDIGtleVxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGF0YSBSYXcgaW5wdXQgc3RyaW5nXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFJhdyBNRDUgc3RyaW5nXG4gICAqL1xuICBmdW5jdGlvbiByc3RySE1BQ01ENShrZXksIGRhdGEpIHtcbiAgICB2YXIgaVxuICAgIHZhciBia2V5ID0gcnN0cjJiaW5sKGtleSlcbiAgICB2YXIgaXBhZCA9IFtdXG4gICAgdmFyIG9wYWQgPSBbXVxuICAgIHZhciBoYXNoXG4gICAgaXBhZFsxNV0gPSBvcGFkWzE1XSA9IHVuZGVmaW5lZFxuICAgIGlmIChia2V5Lmxlbmd0aCA+IDE2KSB7XG4gICAgICBia2V5ID0gYmlubE1ENShia2V5LCBrZXkubGVuZ3RoICogOClcbiAgICB9XG4gICAgZm9yIChpID0gMDsgaSA8IDE2OyBpICs9IDEpIHtcbiAgICAgIGlwYWRbaV0gPSBia2V5W2ldIF4gMHgzNjM2MzYzNlxuICAgICAgb3BhZFtpXSA9IGJrZXlbaV0gXiAweDVjNWM1YzVjXG4gICAgfVxuICAgIGhhc2ggPSBiaW5sTUQ1KGlwYWQuY29uY2F0KHJzdHIyYmlubChkYXRhKSksIDUxMiArIGRhdGEubGVuZ3RoICogOClcbiAgICByZXR1cm4gYmlubDJyc3RyKGJpbmxNRDUob3BhZC5jb25jYXQoaGFzaCksIDUxMiArIDEyOCkpXG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBhIHJhdyBzdHJpbmcgdG8gYSBoZXggc3RyaW5nXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpbnB1dCBSYXcgaW5wdXQgc3RyaW5nXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IEhleCBlbmNvZGVkIHN0cmluZ1xuICAgKi9cbiAgZnVuY3Rpb24gcnN0cjJoZXgoaW5wdXQpIHtcbiAgICB2YXIgaGV4VGFiID0gJzAxMjM0NTY3ODlhYmNkZWYnXG4gICAgdmFyIG91dHB1dCA9ICcnXG4gICAgdmFyIHhcbiAgICB2YXIgaVxuICAgIGZvciAoaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgeCA9IGlucHV0LmNoYXJDb2RlQXQoaSlcbiAgICAgIG91dHB1dCArPSBoZXhUYWIuY2hhckF0KCh4ID4+PiA0KSAmIDB4MGYpICsgaGV4VGFiLmNoYXJBdCh4ICYgMHgwZilcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgLyoqXG4gICAqIEVuY29kZSBhIHN0cmluZyBhcyBVVEYtOFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaW5wdXQgSW5wdXQgc3RyaW5nXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFVURjggc3RyaW5nXG4gICAqL1xuICBmdW5jdGlvbiBzdHIycnN0clVURjgoaW5wdXQpIHtcbiAgICByZXR1cm4gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGlucHV0KSlcbiAgfVxuXG4gIC8qKlxuICAgKiBFbmNvZGVzIGlucHV0IHN0cmluZyBhcyByYXcgTUQ1IHN0cmluZ1xuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcyBJbnB1dCBzdHJpbmdcbiAgICogQHJldHVybnMge3N0cmluZ30gUmF3IE1ENSBzdHJpbmdcbiAgICovXG4gIGZ1bmN0aW9uIHJhd01ENShzKSB7XG4gICAgcmV0dXJuIHJzdHJNRDUoc3RyMnJzdHJVVEY4KHMpKVxuICB9XG4gIC8qKlxuICAgKiBFbmNvZGVzIGlucHV0IHN0cmluZyBhcyBIZXggZW5jb2RlZCBzdHJpbmdcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHMgSW5wdXQgc3RyaW5nXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IEhleCBlbmNvZGVkIHN0cmluZ1xuICAgKi9cbiAgZnVuY3Rpb24gaGV4TUQ1KHMpIHtcbiAgICByZXR1cm4gcnN0cjJoZXgocmF3TUQ1KHMpKVxuICB9XG4gIC8qKlxuICAgKiBDYWxjdWxhdGVzIHRoZSByYXcgSE1BQy1NRDUgZm9yIHRoZSBnaXZlbiBrZXkgYW5kIGRhdGFcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGsgSE1BQyBrZXlcbiAgICogQHBhcmFtIHtzdHJpbmd9IGQgSW5wdXQgc3RyaW5nXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFJhdyBNRDUgc3RyaW5nXG4gICAqL1xuICBmdW5jdGlvbiByYXdITUFDTUQ1KGssIGQpIHtcbiAgICByZXR1cm4gcnN0ckhNQUNNRDUoc3RyMnJzdHJVVEY4KGspLCBzdHIycnN0clVURjgoZCkpXG4gIH1cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgdGhlIEhleCBlbmNvZGVkIEhNQUMtTUQ1IGZvciB0aGUgZ2l2ZW4ga2V5IGFuZCBkYXRhXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrIEhNQUMga2V5XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkIElucHV0IHN0cmluZ1xuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSYXcgTUQ1IHN0cmluZ1xuICAgKi9cbiAgZnVuY3Rpb24gaGV4SE1BQ01ENShrLCBkKSB7XG4gICAgcmV0dXJuIHJzdHIyaGV4KHJhd0hNQUNNRDUoaywgZCkpXG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlcyBNRDUgdmFsdWUgZm9yIGEgZ2l2ZW4gc3RyaW5nLlxuICAgKiBJZiBhIGtleSBpcyBwcm92aWRlZCwgY2FsY3VsYXRlcyB0aGUgSE1BQy1NRDUgdmFsdWUuXG4gICAqIFJldHVybnMgYSBIZXggZW5jb2RlZCBzdHJpbmcgdW5sZXNzIHRoZSByYXcgYXJndW1lbnQgaXMgZ2l2ZW4uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgSW5wdXQgc3RyaW5nXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBba2V5XSBITUFDIGtleVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtyYXddIFJhdyBvdXRwdXQgc3dpdGNoXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IE1ENSBvdXRwdXRcbiAgICovXG4gIGZ1bmN0aW9uIG1kNShzdHJpbmcsIGtleSwgcmF3KSB7XG4gICAgaWYgKCFrZXkpIHtcbiAgICAgIGlmICghcmF3KSB7XG4gICAgICAgIHJldHVybiBoZXhNRDUoc3RyaW5nKVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJhd01ENShzdHJpbmcpXG4gICAgfVxuICAgIGlmICghcmF3KSB7XG4gICAgICByZXR1cm4gaGV4SE1BQ01ENShrZXksIHN0cmluZylcbiAgICB9XG4gICAgcmV0dXJuIHJhd0hNQUNNRDUoa2V5LCBzdHJpbmcpXG4gIH1cblxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBtZDVcbiAgICB9KVxuICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBtZDVcbiAgfSBlbHNlIHtcbiAgICAkLm1kNSA9IG1kNVxuICB9XG59KSh0aGlzKVxuIiwidmFyIHJuZyA9IHJlcXVpcmUoJy4vbGliL3JuZycpO1xudmFyIGJ5dGVzVG9VdWlkID0gcmVxdWlyZSgnLi9saWIvYnl0ZXNUb1V1aWQnKTtcblxuLy8gKipgdjEoKWAgLSBHZW5lcmF0ZSB0aW1lLWJhc2VkIFVVSUQqKlxuLy9cbi8vIEluc3BpcmVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9MaW9zSy9VVUlELmpzXG4vLyBhbmQgaHR0cDovL2RvY3MucHl0aG9uLm9yZy9saWJyYXJ5L3V1aWQuaHRtbFxuXG52YXIgX25vZGVJZDtcbnZhciBfY2xvY2tzZXE7XG5cbi8vIFByZXZpb3VzIHV1aWQgY3JlYXRpb24gdGltZVxudmFyIF9sYXN0TVNlY3MgPSAwO1xudmFyIF9sYXN0TlNlY3MgPSAwO1xuXG4vLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2Jyb29mYS9ub2RlLXV1aWQgZm9yIEFQSSBkZXRhaWxzXG5mdW5jdGlvbiB2MShvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICB2YXIgaSA9IGJ1ZiAmJiBvZmZzZXQgfHwgMDtcbiAgdmFyIGIgPSBidWYgfHwgW107XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBub2RlID0gb3B0aW9ucy5ub2RlIHx8IF9ub2RlSWQ7XG4gIHZhciBjbG9ja3NlcSA9IG9wdGlvbnMuY2xvY2tzZXEgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY2xvY2tzZXEgOiBfY2xvY2tzZXE7XG5cbiAgLy8gbm9kZSBhbmQgY2xvY2tzZXEgbmVlZCB0byBiZSBpbml0aWFsaXplZCB0byByYW5kb20gdmFsdWVzIGlmIHRoZXkncmUgbm90XG4gIC8vIHNwZWNpZmllZC4gIFdlIGRvIHRoaXMgbGF6aWx5IHRvIG1pbmltaXplIGlzc3VlcyByZWxhdGVkIHRvIGluc3VmZmljaWVudFxuICAvLyBzeXN0ZW0gZW50cm9weS4gIFNlZSAjMTg5XG4gIGlmIChub2RlID09IG51bGwgfHwgY2xvY2tzZXEgPT0gbnVsbCkge1xuICAgIHZhciBzZWVkQnl0ZXMgPSBybmcoKTtcbiAgICBpZiAobm9kZSA9PSBudWxsKSB7XG4gICAgICAvLyBQZXIgNC41LCBjcmVhdGUgYW5kIDQ4LWJpdCBub2RlIGlkLCAoNDcgcmFuZG9tIGJpdHMgKyBtdWx0aWNhc3QgYml0ID0gMSlcbiAgICAgIG5vZGUgPSBfbm9kZUlkID0gW1xuICAgICAgICBzZWVkQnl0ZXNbMF0gfCAweDAxLFxuICAgICAgICBzZWVkQnl0ZXNbMV0sIHNlZWRCeXRlc1syXSwgc2VlZEJ5dGVzWzNdLCBzZWVkQnl0ZXNbNF0sIHNlZWRCeXRlc1s1XVxuICAgICAgXTtcbiAgICB9XG4gICAgaWYgKGNsb2Nrc2VxID09IG51bGwpIHtcbiAgICAgIC8vIFBlciA0LjIuMiwgcmFuZG9taXplICgxNCBiaXQpIGNsb2Nrc2VxXG4gICAgICBjbG9ja3NlcSA9IF9jbG9ja3NlcSA9IChzZWVkQnl0ZXNbNl0gPDwgOCB8IHNlZWRCeXRlc1s3XSkgJiAweDNmZmY7XG4gICAgfVxuICB9XG5cbiAgLy8gVVVJRCB0aW1lc3RhbXBzIGFyZSAxMDAgbmFuby1zZWNvbmQgdW5pdHMgc2luY2UgdGhlIEdyZWdvcmlhbiBlcG9jaCxcbiAgLy8gKDE1ODItMTAtMTUgMDA6MDApLiAgSlNOdW1iZXJzIGFyZW4ndCBwcmVjaXNlIGVub3VnaCBmb3IgdGhpcywgc29cbiAgLy8gdGltZSBpcyBoYW5kbGVkIGludGVybmFsbHkgYXMgJ21zZWNzJyAoaW50ZWdlciBtaWxsaXNlY29uZHMpIGFuZCAnbnNlY3MnXG4gIC8vICgxMDAtbmFub3NlY29uZHMgb2Zmc2V0IGZyb20gbXNlY3MpIHNpbmNlIHVuaXggZXBvY2gsIDE5NzAtMDEtMDEgMDA6MDAuXG4gIHZhciBtc2VjcyA9IG9wdGlvbnMubXNlY3MgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubXNlY3MgOiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICAvLyBQZXIgNC4yLjEuMiwgdXNlIGNvdW50IG9mIHV1aWQncyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBjdXJyZW50IGNsb2NrXG4gIC8vIGN5Y2xlIHRvIHNpbXVsYXRlIGhpZ2hlciByZXNvbHV0aW9uIGNsb2NrXG4gIHZhciBuc2VjcyA9IG9wdGlvbnMubnNlY3MgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubnNlY3MgOiBfbGFzdE5TZWNzICsgMTtcblxuICAvLyBUaW1lIHNpbmNlIGxhc3QgdXVpZCBjcmVhdGlvbiAoaW4gbXNlY3MpXG4gIHZhciBkdCA9IChtc2VjcyAtIF9sYXN0TVNlY3MpICsgKG5zZWNzIC0gX2xhc3ROU2VjcykvMTAwMDA7XG5cbiAgLy8gUGVyIDQuMi4xLjIsIEJ1bXAgY2xvY2tzZXEgb24gY2xvY2sgcmVncmVzc2lvblxuICBpZiAoZHQgPCAwICYmIG9wdGlvbnMuY2xvY2tzZXEgPT09IHVuZGVmaW5lZCkge1xuICAgIGNsb2Nrc2VxID0gY2xvY2tzZXEgKyAxICYgMHgzZmZmO1xuICB9XG5cbiAgLy8gUmVzZXQgbnNlY3MgaWYgY2xvY2sgcmVncmVzc2VzIChuZXcgY2xvY2tzZXEpIG9yIHdlJ3ZlIG1vdmVkIG9udG8gYSBuZXdcbiAgLy8gdGltZSBpbnRlcnZhbFxuICBpZiAoKGR0IDwgMCB8fCBtc2VjcyA+IF9sYXN0TVNlY3MpICYmIG9wdGlvbnMubnNlY3MgPT09IHVuZGVmaW5lZCkge1xuICAgIG5zZWNzID0gMDtcbiAgfVxuXG4gIC8vIFBlciA0LjIuMS4yIFRocm93IGVycm9yIGlmIHRvbyBtYW55IHV1aWRzIGFyZSByZXF1ZXN0ZWRcbiAgaWYgKG5zZWNzID49IDEwMDAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1dWlkLnYxKCk6IENhblxcJ3QgY3JlYXRlIG1vcmUgdGhhbiAxME0gdXVpZHMvc2VjJyk7XG4gIH1cblxuICBfbGFzdE1TZWNzID0gbXNlY3M7XG4gIF9sYXN0TlNlY3MgPSBuc2VjcztcbiAgX2Nsb2Nrc2VxID0gY2xvY2tzZXE7XG5cbiAgLy8gUGVyIDQuMS40IC0gQ29udmVydCBmcm9tIHVuaXggZXBvY2ggdG8gR3JlZ29yaWFuIGVwb2NoXG4gIG1zZWNzICs9IDEyMjE5MjkyODAwMDAwO1xuXG4gIC8vIGB0aW1lX2xvd2BcbiAgdmFyIHRsID0gKChtc2VjcyAmIDB4ZmZmZmZmZikgKiAxMDAwMCArIG5zZWNzKSAlIDB4MTAwMDAwMDAwO1xuICBiW2krK10gPSB0bCA+Pj4gMjQgJiAweGZmO1xuICBiW2krK10gPSB0bCA+Pj4gMTYgJiAweGZmO1xuICBiW2krK10gPSB0bCA+Pj4gOCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsICYgMHhmZjtcblxuICAvLyBgdGltZV9taWRgXG4gIHZhciB0bWggPSAobXNlY3MgLyAweDEwMDAwMDAwMCAqIDEwMDAwKSAmIDB4ZmZmZmZmZjtcbiAgYltpKytdID0gdG1oID4+PiA4ICYgMHhmZjtcbiAgYltpKytdID0gdG1oICYgMHhmZjtcblxuICAvLyBgdGltZV9oaWdoX2FuZF92ZXJzaW9uYFxuICBiW2krK10gPSB0bWggPj4+IDI0ICYgMHhmIHwgMHgxMDsgLy8gaW5jbHVkZSB2ZXJzaW9uXG4gIGJbaSsrXSA9IHRtaCA+Pj4gMTYgJiAweGZmO1xuXG4gIC8vIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYCAoUGVyIDQuMi4yIC0gaW5jbHVkZSB2YXJpYW50KVxuICBiW2krK10gPSBjbG9ja3NlcSA+Pj4gOCB8IDB4ODA7XG5cbiAgLy8gYGNsb2NrX3NlcV9sb3dgXG4gIGJbaSsrXSA9IGNsb2Nrc2VxICYgMHhmZjtcblxuICAvLyBgbm9kZWBcbiAgZm9yICh2YXIgbiA9IDA7IG4gPCA2OyArK24pIHtcbiAgICBiW2kgKyBuXSA9IG5vZGVbbl07XG4gIH1cblxuICByZXR1cm4gYnVmID8gYnVmIDogYnl0ZXNUb1V1aWQoYik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdjE7XG4iLCJ2YXIgcm5nID0gcmVxdWlyZSgnLi9saWIvcm5nJyk7XG52YXIgYnl0ZXNUb1V1aWQgPSByZXF1aXJlKCcuL2xpYi9ieXRlc1RvVXVpZCcpO1xuXG5mdW5jdGlvbiB2NChvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICB2YXIgaSA9IGJ1ZiAmJiBvZmZzZXQgfHwgMDtcblxuICBpZiAodHlwZW9mKG9wdGlvbnMpID09ICdzdHJpbmcnKSB7XG4gICAgYnVmID0gb3B0aW9ucyA9PT0gJ2JpbmFyeScgPyBuZXcgQXJyYXkoMTYpIDogbnVsbDtcbiAgICBvcHRpb25zID0gbnVsbDtcbiAgfVxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICB2YXIgcm5kcyA9IG9wdGlvbnMucmFuZG9tIHx8IChvcHRpb25zLnJuZyB8fCBybmcpKCk7XG5cbiAgLy8gUGVyIDQuNCwgc2V0IGJpdHMgZm9yIHZlcnNpb24gYW5kIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYFxuICBybmRzWzZdID0gKHJuZHNbNl0gJiAweDBmKSB8IDB4NDA7XG4gIHJuZHNbOF0gPSAocm5kc1s4XSAmIDB4M2YpIHwgMHg4MDtcblxuICAvLyBDb3B5IGJ5dGVzIHRvIGJ1ZmZlciwgaWYgcHJvdmlkZWRcbiAgaWYgKGJ1Zikge1xuICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCAxNjsgKytpaSkge1xuICAgICAgYnVmW2kgKyBpaV0gPSBybmRzW2lpXTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYnVmIHx8IGJ5dGVzVG9VdWlkKHJuZHMpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHY0O1xuIiwiZXhwb3J0IGludGVyZmFjZSBJSHR0cENvbmZpZyB7XG4gICAgYmFzZVVSTDogc3RyaW5nO1xuICAgIGtleXM6IHtcbiAgICAgICAgcHVibGljS2V5OiBzdHJpbmc7XG4gICAgICAgIHByaXZhdGVLZXk6IHN0cmluZztcbiAgICB9O1xuICAgIHN0b3JhZ2U6IHtcbiAgICAgICAgdXBsb2FkSW5pdGlhbGlzZTogc3RyaW5nO1xuICAgICAgICB1cGxvYWRQYXJ0OiBzdHJpbmc7XG4gICAgICAgIGdldDogc3RyaW5nO1xuICAgICAgICBsaXN0OiBzdHJpbmc7XG4gICAgICAgIGNvcHk6IHN0cmluZztcbiAgICAgICAgbW92ZTogc3RyaW5nO1xuICAgICAgICBkZWxldGU6IHN0cmluZztcbiAgICB9O1xuICAgIHRyYW5zZmVyOiB7XG4gICAgICAgIHVwbG9hZEluaXRpYWxpc2U6IHN0cmluZztcbiAgICAgICAgdXBsb2FkUGFydDogc3RyaW5nO1xuICAgICAgICBnZXQ6IHN0cmluZztcbiAgICAgICAgYWN0aXZpdHk6IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElDb25maWcge1xuICAgIGh0dHA6IElIdHRwQ29uZmlnO1xufVxuXG5sZXQgY29uZmlndXJhdGlvbjogSUNvbmZpZyA9IHtcbiAgICBodHRwOiB7XG4gICAgICAgIGJhc2VVUkw6IGBodHRwczovL2FwaS5zdGlyZGllLmNvbWAsXG4gICAgICAgIGtleXM6IHtcbiAgICAgICAgICAgIHB1YmxpY0tleTogYC9rZXlzL3B1YmxpYy86aWRgLFxuICAgICAgICAgICAgcHJpdmF0ZUtleTogYC9rZXlzL3ByaXZhdGVgLFxuICAgICAgICB9LFxuICAgICAgICBzdG9yYWdlOiB7XG4gICAgICAgICAgICB1cGxvYWRJbml0aWFsaXNlOiBgL3N0b3JhZ2UvdXBsb2FkLzppZGAsXG4gICAgICAgICAgICB1cGxvYWRQYXJ0OiBgL3N0b3JhZ2UvdXBsb2FkYCxcbiAgICAgICAgICAgIGdldDogYC9zdG9yYWdlLzppZGAsXG4gICAgICAgICAgICBsaXN0OiBgL3N0b3JhZ2VgLFxuICAgICAgICAgICAgY29weTogYC9zdG9yYWdlLzppZC9jb3B5YCxcbiAgICAgICAgICAgIG1vdmU6IGAvc3RvcmFnZS86aWQvbW92ZWAsXG4gICAgICAgICAgICBkZWxldGU6IGAvc3RvcmFnZS86aWRgLFxuICAgICAgICB9LFxuICAgICAgICB0cmFuc2Zlcjoge1xuICAgICAgICAgICAgdXBsb2FkSW5pdGlhbGlzZTogYC90cmFuc2Zlci91cGxvYWQvOmlkYCxcbiAgICAgICAgICAgIHVwbG9hZFBhcnQ6IGAvdHJhbnNmZXIvdXBsb2FkYCxcbiAgICAgICAgICAgIGdldDogYC90cmFuc2Zlci86aWRgLFxuICAgICAgICAgICAgYWN0aXZpdHk6IGAvdHJhbnNmZXJgLFxuICAgICAgICB9LFxuICAgIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgZ2V0OiAoKSA9PiBjb25maWd1cmF0aW9uLFxuICAgIHNldDogKG92ZXJyaWRlczogUGFydGlhbDxJQ29uZmlnPikgPT4ge1xuICAgICAgICBjb25maWd1cmF0aW9uID0ge1xuICAgICAgICAgICAgLi4uY29uZmlndXJhdGlvbixcbiAgICAgICAgICAgIC4uLm92ZXJyaWRlcyxcbiAgICAgICAgfTtcbiAgICB9LFxufTtcbiIsImV4cG9ydCBpbnRlcmZhY2UgQ3JlZGVudGlhbHMge1xuICAgIGlkVG9rZW4/OiBzdHJpbmc7XG4gICAgcmVmcmVzaFRva2VuPzogc3RyaW5nO1xufVxuXG5sZXQgY3JlZGVudGlhbHM6IENyZWRlbnRpYWxzID0ge307XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBnZXQ6ICgpID0+IGNyZWRlbnRpYWxzLFxuICAgIHNldDogKGNyZWQ6IENyZWRlbnRpYWxzKSA9PiB7XG4gICAgICAgIGNyZWRlbnRpYWxzID0ge1xuICAgICAgICAgICAgLi4uY3JlZGVudGlhbHMsXG4gICAgICAgICAgICAuLi5jcmVkLFxuICAgICAgICB9O1xuICAgIH0sXG59O1xuIiwiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY3JlYXRlQmluZGluZyhvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgcHJpdmF0ZU1hcCkge1xyXG4gICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcml2YXRlTWFwLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBwcml2YXRlTWFwLCB2YWx1ZSkge1xyXG4gICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtcclxuICAgIH1cclxuICAgIHByaXZhdGVNYXAuc2V0KHJlY2VpdmVyLCB2YWx1ZSk7XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuIiwiaW1wb3J0IHsgSVN0aXJkaWVLZXlNYW5hZ2VtZW50U2VydmljZSB9IGZyb20gXCIuLi9zaGFyZWQvc2VydmljZXMva2V5cy5zZXJ2aWNlXCI7XG5cbmV4cG9ydCBjbGFzcyBTdGlyZGllS2V5TWFuYWdlbWVudCB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBrZXlNYW5hZ2VtZW50U2VyaXZjZTogSVN0aXJkaWVLZXlNYW5hZ2VtZW50U2VydmljZSkge31cblxuICAgIGFzeW5jIGdldFB1YmxpY0tleSh1c2VyOiBzdHJpbmcgPSBcIm1lXCIsIGNhbGxiYWNrOiAoZXJyLCByZXN1bHQ/KSA9PiB2b2lkKSB7XG4gICAgICAgIHRoaXMua2V5TWFuYWdlbWVudFNlcml2Y2VcbiAgICAgICAgICAgIC5nZXRQdWJsaWNLZXkodXNlcilcbiAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IGNhbGxiYWNrKG51bGwsIHJlc3VsdCkpXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY2FsbGJhY2soZXJyKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UHJpdmF0ZUtleShjYWxsYmFjazogKGVyciwgcmVzdWx0PykgPT4gdm9pZCkge1xuICAgICAgICB0aGlzLmtleU1hbmFnZW1lbnRTZXJpdmNlXG4gICAgICAgICAgICAuZ2V0UHJpdmF0ZUtleSgpXG4gICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiBjYWxsYmFjayhudWxsLCByZXN1bHQpKVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjb25zdCBhcnJheUJ1ZmZlclRvQmFzZTY0ID0gKGJ1ZmZlcjogQXJyYXlCdWZmZXIpOiBzdHJpbmcgPT4ge1xuICAgIGxldCBiaW5hcnkgPSBcIlwiO1xuICAgIHZhciBieXRlQXJyYXkgPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xuICAgIHZhciBsZW4gPSBieXRlQXJyYXkuYnl0ZUxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGJpbmFyeSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVBcnJheVtpXSk7XG4gICAgfVxuICAgIHJldHVybiB3aW5kb3cuYnRvYShiaW5hcnkpO1xufTtcbiIsImltcG9ydCB7IHN0cmluZ1RvQXJyYXlCdWZmZXIgfSBmcm9tIFwiLi9zdHJpbmctdG8tYXJyYXlidWZmZXJcIjtcblxuZXhwb3J0IGNvbnN0IGJhc2U2NFRvQXJyYXlCdWZmZXIgPSAoYjY0OiBzdHJpbmcpOiBBcnJheUJ1ZmZlciA9PiB7XG4gICAgcmV0dXJuIHN0cmluZ1RvQXJyYXlCdWZmZXIod2luZG93LmF0b2IoYjY0KSk7XG59O1xuIiwiZXhwb3J0IGNvbnN0IHN0cmluZ1RvQXJyYXlCdWZmZXIgPSAoc3RyOiBzdHJpbmcpOiBBcnJheUJ1ZmZlciA9PiB7XG4gICAgbGV0IGJ5dGVBcnJheSA9IG5ldyBVaW50OEFycmF5KHN0ci5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGJ5dGVBcnJheVtpXSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgIH1cbiAgICByZXR1cm4gYnl0ZUFycmF5O1xufTtcbiIsImV4cG9ydCBjb25zdCBBRVNfR0NNID0gXCJBRVMtR0NNXCI7XG5leHBvcnQgY29uc3QgUlNBX09BRVAgPSBcIlJTQS1PQUVQXCI7XG4iLCJpbXBvcnQgKiBhcyBjb252IGZyb20gXCIuLi8uLi9oZWxwZXJzL2NvbnZlcnNpb25cIjtcblxuZXhwb3J0IHR5cGUgS2V5VHlwZSA9IFwicHJpdmF0ZVwiIHwgXCJwdWJsaWNcIjtcbmV4cG9ydCB0eXBlIEtleU1vZGUgPSBcImVuY3J5cHRcIiB8IFwiZGVjcnlwdFwiO1xuZXhwb3J0IHR5cGUgSW1wb3J0S2V5Rm9ybWF0ID0gXCJyYXdcIiB8IFwicGtjczhcIiB8IFwic3BraVwiIHwgXCJqd2tcIjtcbmV4cG9ydCB0eXBlIEJpbmFyeVR5cGUgPVxuICAgIHwgQXJyYXlCdWZmZXJcbiAgICB8IFVpbnQxNkFycmF5XG4gICAgfCBVaW50OEFycmF5XG4gICAgfCBJbnQ4QXJyYXlcbiAgICB8IEludDE2QXJyYXlcbiAgICB8IEludDMyQXJyYXlcbiAgICB8IFVpbnQzMkFycmF5XG4gICAgfCBVaW50OENsYW1wZWRBcnJheVxuICAgIHwgRmxvYXQzMkFycmF5XG4gICAgfCBGbG9hdDY0QXJyYXlcbiAgICB8IERhdGFWaWV3O1xuXG5jb25zdCBpbXBvcnRLZXkgPSAoXG4gICAgcGVtOiBzdHJpbmcsXG4gICAga2V5VHlwZTogS2V5VHlwZSA9IFwicHVibGljXCJcbik6IFByb21pc2U8Q3J5cHRvS2V5PiA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgbGV0IG1vZGU6IEtleU1vZGUgPSBcImVuY3J5cHRcIixcbiAgICAgICAgICAgIGZvcm1hdDogSW1wb3J0S2V5Rm9ybWF0ID0gXCJzcGtpXCI7XG5cbiAgICAgICAgaWYgKGtleVR5cGUgPT09IFwicHJpdmF0ZVwiKSB7XG4gICAgICAgICAgICBtb2RlID0gXCJkZWNyeXB0XCI7XG4gICAgICAgICAgICBmb3JtYXQgPSBcInBrY3M4XCI7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gQ29udmVydCBiYXNlNjQgdG8gQ3J5cHRvS2V5XG4gICAgICAgICAgICBjcnlwdG8uc3VidGxlXG4gICAgICAgICAgICAgICAgLmltcG9ydEtleShcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0LFxuICAgICAgICAgICAgICAgICAgICBjb252LnBlbVRvQXJyYXlCdWZmZXIocGVtLCBrZXlUeXBlKSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJSU0EtT0FFUFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzaDogXCJTSEEtMjU2XCIsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgICAgIFttb2RlXVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAudGhlbigoa2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGtleSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgaW1wb3J0UHJpdmF0ZUtleSA9IChwZW06IHN0cmluZyk6IFByb21pc2U8Q3J5cHRvS2V5PiA9PiB7XG4gICAgcmV0dXJuIGltcG9ydEtleShwZW0sIFwicHJpdmF0ZVwiKTtcbn07XG5cbmV4cG9ydCBjb25zdCBpbXBvcnRQdWJsaWNLZXkgPSAocGVtOiBzdHJpbmcpOiBQcm9taXNlPENyeXB0b0tleT4gPT4ge1xuICAgIHJldHVybiBpbXBvcnRLZXkocGVtLCBcInB1YmxpY1wiKTtcbn07XG4iLCJpbXBvcnQgeyBiYXNlNjRUb0FycmF5QnVmZmVyIH0gZnJvbSBcIi4vYmFzZTY0LXRvLWFycmF5YnVmZmVyXCI7XG5cbmV4cG9ydCBjb25zdCBwZW1Ub0FycmF5QnVmZmVyID0gKFxuICAgIHBlbTogc3RyaW5nLFxuICAgIGtleVR5cGU6IEtleVR5cGUgPSBcInB1YmxpY1wiXG4pOiBBcnJheUJ1ZmZlciA9PiB7XG4gICAgcGVtID0gcGVtLnJlcGxhY2UoXCJcXG5cIiwgXCJcIik7XG4gICAgcGVtID0gcGVtLnJlcGxhY2UoYC0tLS0tQkVHSU4gJHtrZXlUeXBlLnRvVXBwZXJDYXNlKCl9IEtFWS0tLS0tYCwgXCJcIik7XG4gICAgcGVtID0gcGVtLnJlcGxhY2UoYC0tLS0tRU5EICR7a2V5VHlwZS50b1VwcGVyQ2FzZSgpfSBLRVktLS0tLWAsIFwiXCIpO1xuXG4gICAgcmV0dXJuIGJhc2U2NFRvQXJyYXlCdWZmZXIocGVtKTtcbn07XG4iLCJpbXBvcnQgKiBhcyBjb252IGZyb20gXCIuLi8uLi9oZWxwZXJzL2NvbnZlcnNpb25cIjtcbmltcG9ydCAqIGFzIGFsZ28gZnJvbSBcIi4vYWxnb1wiO1xuaW1wb3J0IHsgZXhwb3J0S2V5IH0gZnJvbSBcIi4vZXhwb3J0LWtleVwiO1xuaW1wb3J0IHsgaW1wb3J0UHVibGljS2V5IH0gZnJvbSBcIi4vaW1wb3J0LWtleVwiO1xuXG5leHBvcnQgZGVmYXVsdCAob3B0czoge1xuICAgIGJ1ZmZlcjogQXJyYXlCdWZmZXI7XG4gICAga2V5OiBDcnlwdG9LZXk7XG4gICAgaXY6IEFycmF5QnVmZmVyO1xuICAgIHBlbTogc3RyaW5nO1xufSk6IFByb21pc2U8eyBidWZmZXI6IEFycmF5QnVmZmVyOyBrZXk6IHN0cmluZyB9PiA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHB1YmxpY0tleTogQ3J5cHRvS2V5ID0gYXdhaXQgaW1wb3J0UHVibGljS2V5KG9wdHMucGVtKTtcblxuICAgICAgICAgICAgLy8gZW5jcnlwdCBmaWxlIHdpdGggdGhlIHN5bW1ldHJpY2FsIGtleVxuICAgICAgICAgICAgY29uc3QgZW5jRmlsZSA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZW5jcnlwdChcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGFsZ28uQUVTX0dDTSxcbiAgICAgICAgICAgICAgICAgICAgaXY6IG9wdHMuaXYsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvcHRzLmtleSxcbiAgICAgICAgICAgICAgICBvcHRzLmJ1ZmZlclxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gZW5jcnlwdCBzeW1tZXRyaWNhbCBrZXkgdXNpbmcgUlNBLU9FQVBcbiAgICAgICAgICAgIGNvbnN0IGtleUJ1ZmZlciA9IGF3YWl0IGV4cG9ydEtleShvcHRzLmtleSk7XG4gICAgICAgICAgICBjb25zdCBlY25TeW1LZXlCdWZmZXI6IEFycmF5QnVmZmVyID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5lbmNyeXB0KFxuICAgICAgICAgICAgICAgIHsgbmFtZTogYWxnby5SU0FfT0FFUCB9LFxuICAgICAgICAgICAgICAgIHB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBrZXlCdWZmZXJcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHtcbiAgICAgICAgICAgICAgICBidWZmZXI6IGVuY0ZpbGUsXG4gICAgICAgICAgICAgICAga2V5OiBjb252LmFycmF5QnVmZmVyVG9CYXNlNjQoZWNuU3ltS2V5QnVmZmVyKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG4iLCJleHBvcnQgY29uc3QgZXhwb3J0S2V5ID0gYXN5bmMgKGtleVRvRW5jcnlwdCkgPT4ge1xuICAgIHJldHVybiBhd2FpdCBjcnlwdG8uc3VidGxlLmV4cG9ydEtleShcInJhd1wiLCBrZXlUb0VuY3J5cHQpO1xufTtcbiIsImltcG9ydCAqIGFzIGFsZ28gZnJvbSBcIi4vYWxnb1wiO1xuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVFbmNyeXB0aW9uS2V5ID0gKFxuICAgIGJpdHM6IG51bWJlciA9IDI1NlxuKTogUHJvbWlzZTxDcnlwdG9LZXk+ID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUpID0+IHtcbiAgICAgICAgcmVzb2x2ZShcbiAgICAgICAgICAgIGF3YWl0IGNyeXB0by5zdWJ0bGUuZ2VuZXJhdGVLZXkoXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBhbGdvLkFFU19HQ00sXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aDogYml0cyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgW1wiZW5jcnlwdFwiLCBcImRlY3J5cHRcIl1cbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9KTtcbn07XG4iLCJleHBvcnQgY2xhc3MgRXZlbnRFbWl0dGVyIHtcbiAgICBzdWJzY3JpYmVycyA9IHt9O1xuXG4gICAgb24oZXZlbnQ6IHN0cmluZywgY2FsbGJhY2s6ICguLi5kYXRhKSA9PiB2b2lkKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5zdWJzY3JpYmVyc1tldmVudF0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlcnNbZXZlbnRdID0gW107XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnN1YnNjcmliZXJzW2V2ZW50XS5wdXNoKGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICBlbWl0KGV2ZW50OiBzdHJpbmcsIC4uLmFyZ3MpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnN1YnNjcmliZXJzW2V2ZW50XSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVyc1tldmVudF0uZm9yRWFjaCgoY2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayguLi5hcmdzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IGdldENodW5rID0gKFxuICAgIGNodW5rQ291bnQ6IG51bWJlcixcbiAgICBjaHVua1NpemU6IG51bWJlcixcbiAgICBjaHVua3NUb3RhbDogbnVtYmVyLFxuICAgIGZpbGU6IEJsb2Jcbik6IFByb21pc2U8QmxvYj4gPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICBjb25zdCBsZW5ndGggPSBjaHVua3NUb3RhbCA9PT0gMSA/IGZpbGUuc2l6ZSA6IGNodW5rU2l6ZSAqIDEwMjQgKiAxMDI0O1xuICAgICAgICBjb25zdCBzdGFydCA9IGxlbmd0aCAqIGNodW5rQ291bnQ7XG4gICAgICAgIGNvbnN0IGVuZCA9IGxlbmd0aCAqIChjaHVua0NvdW50ICsgMSk7XG5cbiAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUoXG4gICAgICAgICAgICAgICAgbmV3IEJsb2IoW3JlYWRlci5yZXN1bHRdLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCIsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUuc2xpY2Uoc3RhcnQsIGVuZCkpO1xuICAgIH0pO1xufTtcbiIsImltcG9ydCB7IElVcGxvYWRTZXJ2aWNlIH0gZnJvbSBcIi4uLy4uL3NlcnZpY2VzL3VwbG9hZC5zZXJ2aWNlXCI7XG5pbXBvcnQgeyBnZXRDaHVuayB9IGZyb20gXCIuL2dldENodW5rXCI7XG5pbXBvcnQgeyBzZW5kQ2h1bmsgfSBmcm9tIFwiLi9zZW5kQ2h1bmtcIjtcblxuZXhwb3J0IGNvbnN0IHNlbmRDaHVua3MgPSAoXG4gICAgZmlsZUlkOiBzdHJpbmcsXG4gICAgY2hlY2tzdW06IHN0cmluZyxcbiAgICBjaHVua0NvdW50OiBudW1iZXIsXG4gICAgY2h1bmtTaXplOiBudW1iZXIsXG4gICAgY2h1bmtzVG90YWw6IG51bWJlcixcbiAgICBmaWxlOiBCbG9iLFxuICAgIHVwbG9hZFNlcnZpY2U6IElVcGxvYWRTZXJ2aWNlXG4pID0+IHtcbiAgICByZXR1cm4gZ2V0Q2h1bmsoY2h1bmtDb3VudCwgY2h1bmtTaXplLCBjaHVua3NUb3RhbCwgZmlsZSkudGhlbigoYmxvYikgPT5cbiAgICAgICAgc2VuZENodW5rKFxuICAgICAgICAgICAgZmlsZUlkLFxuICAgICAgICAgICAgY2hlY2tzdW0sXG4gICAgICAgICAgICBibG9iLFxuICAgICAgICAgICAgY2h1bmtDb3VudCxcbiAgICAgICAgICAgIGNodW5rc1RvdGFsLFxuICAgICAgICAgICAgdXBsb2FkU2VydmljZVxuICAgICAgICApXG4gICAgKTtcbn07XG4iLCJpbXBvcnQgaHR0cENsaWVudCBmcm9tIFwiLi4vLi4vaGVscGVycy9odHRwY2xpZW50XCI7XG5pbXBvcnQgeyBJVXBsb2FkU2VydmljZSB9IGZyb20gXCIuLi8uLi9zZXJ2aWNlcy91cGxvYWQuc2VydmljZVwiO1xuXG5leHBvcnQgY29uc3Qgc2VuZENodW5rID0gKFxuICAgIGZpbGVJZDogc3RyaW5nLFxuICAgIGNoZWNrc3VtOiBzdHJpbmcsXG4gICAgY2h1bms6IEJsb2IsXG4gICAgY2h1bmtDb3VudDogbnVtYmVyLFxuICAgIGNodW5rVG90YWw6IG51bWJlcixcbiAgICB1cGxvYWRTZXJ2aWNlOiBJVXBsb2FkU2VydmljZVxuKSA9PiB7XG4gICAgY29uc3QgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgIGZvcm0uYXBwZW5kKFwiZmlsZVwiLCBjaHVuayk7XG5cbiAgICByZXR1cm4gdXBsb2FkU2VydmljZS51cGxvYWRQYXJ0KHtcbiAgICAgICAgZmlsZTogZm9ybSxcbiAgICAgICAgZmlsZUlkLFxuICAgICAgICBoYXNoOiBjaGVja3N1bSxcbiAgICAgICAgbnVtOiBjaHVua0NvdW50ICsgMSxcbiAgICAgICAgdG90YWw6IGNodW5rVG90YWwsXG4gICAgfSk7XG59O1xuIiwiaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSBcInV1aWRcIjtcblxuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSBcIi4uLy4uL2hlbHBlcnMvZXZlbnRzXCI7XG5pbXBvcnQgYXJyYXlCdWZmZXJUb0Jsb2cgZnJvbSBcIi4uLy4uL2hlbHBlcnMvY29udmVyc2lvbi9hcnJheWJ1ZmZlci10by1ibG9iXCI7XG5pbXBvcnQgeyBzZW5kQ2h1bmtzIH0gZnJvbSBcIi4vc2VuZENodW5rc1wiO1xuaW1wb3J0IHsgSVVwbG9hZFNlcnZpY2UgfSBmcm9tIFwiLi4vLi4vc2VydmljZXMvdXBsb2FkLnNlcnZpY2VcIjtcbmltcG9ydCB7IGFycmF5QnVmZmVyVG9CYXNlNjQgfSBmcm9tIFwiLi4vLi4vaGVscGVycy9jb252ZXJzaW9uXCI7XG5pbXBvcnQgeyB0aHJlYWRJZCB9IGZyb20gXCJ3b3JrZXJfdGhyZWFkc1wiO1xuXG5leHBvcnQgY2xhc3MgRmlsZUNodW5rVXBsb2FkZXIgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICAgIHByaXZhdGUgX2lkOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBfc3RhdHVzOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBfcGVyY2VudENvbXBsZXRlOiBudW1iZXI7XG5cbiAgICBwcml2YXRlIGZpbGU6IEJsb2I7XG4gICAgcHJpdmF0ZSBjaHVua3NUb3RhbDogbnVtYmVyO1xuXG4gICAgZ2V0IGNvbXBsZXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3RhdHVzID09PSBcImNvbXBsZXRlXCI7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgdXBsb2FkU2VydmljZTogSVVwbG9hZFNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgZmlsZW5hbWU6IHN0cmluZyxcbiAgICAgICAgcHJpdmF0ZSBzaXplOiBudW1iZXIsXG4gICAgICAgIGVuY3J5cHRlZDogQXJyYXlCdWZmZXIsIC8vIEVuY3J5cHRlZCBGaWxlXG4gICAgICAgIGNvbnRlbnRUeXBlOiBzdHJpbmcsXG4gICAgICAgIHByaXZhdGUgY2hlY2tzdW06IHN0cmluZyxcbiAgICAgICAgcHJpdmF0ZSBzeW1tZXRyaWNhbEtleTogc3RyaW5nLCAvLyBFbmNyeXB0ZWQgS2V5XG4gICAgICAgIHByaXZhdGUgaXY6IFVpbnQ4QXJyYXksXG4gICAgICAgIHByaXZhdGUgc2F2ZUxvY2F0aW9uU3RyYXRlZ3ksXG4gICAgICAgIHByaXZhdGUgY2h1bmtTaXplID0gNVxuICAgICkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9pZCA9IHV1aWR2NCgpO1xuICAgICAgICB0aGlzLl9zdGF0dXMgPSBcImluaXRhbGlzZWRcIjtcbiAgICAgICAgdGhpcy5fcGVyY2VudENvbXBsZXRlID0gMDtcbiAgICAgICAgdGhpcy5maWxlID0gYXJyYXlCdWZmZXJUb0Jsb2coZW5jcnlwdGVkLCBjb250ZW50VHlwZSk7XG4gICAgICAgIHRoaXMuY2h1bmtzVG90YWwgPSBNYXRoLmNlaWwoXG4gICAgICAgICAgICB0aGlzLmZpbGUuc2l6ZSAvICh0aGlzLmNodW5rU2l6ZSAqIDEwMjQgKiAxMDI0KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5fc3RhdHVzID0gXCJzdGFydGVkXCI7XG4gICAgICAgICAgICB0aGlzLmVtaXQoXCJzdGFydFwiLCB0aGlzKTtcblxuICAgICAgICAgICAgdGhpcy51cGxvYWRTZXJ2aWNlXG4gICAgICAgICAgICAgICAgLnVwbG9hZEluaXQoe1xuICAgICAgICAgICAgICAgICAgICBmaWxlSWQ6IHRoaXMuZ2V0SWQoKSxcbiAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IHRoaXMuZmlsZW5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IHRoaXMuc2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgaXY6IGFycmF5QnVmZmVyVG9CYXNlNjQodGhpcy5pdiksXG4gICAgICAgICAgICAgICAgICAgIHN5bUtleTogdGhpcy5zeW1tZXRyaWNhbEtleSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudE1ENTogdGhpcy5jaGVja3N1bSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IHRoaXMuZmlsZS50eXBlLFxuICAgICAgICAgICAgICAgICAgICBzYXZlTG9jYXRpb246IHRoaXMuc2F2ZUxvY2F0aW9uU3RyYXRlZ3ksXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jaHVua3NUb3RhbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbmRDaHVua3MoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0SWQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja3N1bSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaHVua1NpemUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2h1bmtzVG90YWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRTZXJ2aWNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3BlcmNlbnRDb21wbGV0ZSA9IE1hdGgucm91bmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgxMDAgLyB0aGlzLmNodW5rc1RvdGFsKSAqIChpICsgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdChcInByb2dyZXNzXCIsIHRoaXMuX3BlcmNlbnRDb21wbGV0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdChcImVycm9yXCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdChcImZpbmlzaFwiKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuX3N0YXR1cyA9IFwiZXJyb3JcIjtcbiAgICAgICAgICAgIHRoaXMuZW1pdChcImVycm9yXCIsIGVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdChcImZpbmlzaFwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldElkKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pZDtcbiAgICB9XG5cbiAgICBnZXRTdGF0dXMoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1cztcbiAgICB9XG5cbiAgICBnZXRQZXJjZW50YWdlQ29tcGxldGUoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BlcmNlbnRDb21wbGV0ZTtcbiAgICB9XG5cbiAgICBvblN0YXJ0KGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMub24oXCJzdGFydFwiLCBjYWxsYmFjayk7XG4gICAgfVxuXG4gICAgb25Qcm9ncmVzcyhjYWxsYmFjaykge1xuICAgICAgICB0aGlzLm9uKFwicHJvZ3Jlc3NcIiwgY2FsbGJhY2spO1xuICAgIH1cblxuICAgIG9uRmluaXNoKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMub24oXCJmaW5pc2hcIiwgY2FsbGJhY2spO1xuICAgIH1cblxuICAgIG9uRXJyb3IoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5vbihcImVycm9yXCIsIGNhbGxiYWNrKTtcbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCAoZGF0YTogQmxvYlBhcnQsIHR5cGU6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiBuZXcgQmxvYihbZGF0YV0sIHsgdHlwZTogdHlwZSB9KTtcbn07XG4iLCJpbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tIFwiLi4vaGVscGVycy9ldmVudHNcIjtcbmltcG9ydCB7IElVcGxvYWRTZXJ2aWNlIH0gZnJvbSBcIi4uL3NlcnZpY2VzL3VwbG9hZC5zZXJ2aWNlXCI7XG5pbXBvcnQgeyBGaWxlQ2h1bmtVcGxvYWRlciB9IGZyb20gXCIuL3VwbG9hZGVyL2ZpbGVDaHVua1VwbG9hZGVyXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXBsb2FkSm9iUGFyYW1zIHtcbiAgICBmaWxlOiBGaWxlO1xuICAgIGVuY3J5cHRlZEZpbGU6IEFycmF5QnVmZmVyO1xuICAgIGNoZWNrc3VtOiBzdHJpbmc7XG4gICAgaXY6IFVpbnQ4QXJyYXk7XG4gICAgc3ltbWV0cmljYWxLZXk6IHN0cmluZztcbiAgICBzYXZlTG9jYXRpb25TdHJhdGVneTtcbn1cblxuZXhwb3J0IGNsYXNzIFVwbG9hZEpvYiBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gICAgcHJpdmF0ZSBqb2JzOiB7IFtpZDogc3RyaW5nXTogRmlsZUNodW5rVXBsb2FkZXIgfSA9IHt9O1xuICAgIHByaXZhdGUgam9ic0FycmF5OiBGaWxlQ2h1bmtVcGxvYWRlcltdID0gW107XG4gICAgcHJpdmF0ZSBlcnJvcnMgPSBbXTtcblxuICAgIGdldCB0b3RhbEpvYnMoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuam9ic0FycmF5Lmxlbmd0aDtcbiAgICB9XG5cbiAgICBnZXQgam9ic0NvbXBsZXRlZCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JzQXJyYXkuZmlsdGVyKCh4KSA9PiB4LmNvbXBsZXRlKS5sZW5ndGg7XG4gICAgfVxuXG4gICAgZ2V0IGpvYnNSZW1haW5pbmcoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuam9ic0FycmF5LmZpbHRlcigoeCkgPT4geC5jb21wbGV0ZSA9PT0gZmFsc2UpLmxlbmd0aDtcbiAgICB9XG5cbiAgICBnZXQgcGVyY2VudGFnZSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdGhpcy5qb2JzQXJyYXlcbiAgICAgICAgICAgICAgICAubWFwKCh4KSA9PiB4LmdldFBlcmNlbnRhZ2VDb21wbGV0ZSgpKVxuICAgICAgICAgICAgICAgIC5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiKSAvIHRoaXMudG90YWxKb2JzXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoZmlsZXM6IFVwbG9hZEpvYlBhcmFtc1tdLCB1cGxvYWRTZXJ2aWNlOiBJVXBsb2FkU2VydmljZSkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIGZpbGVzLmZvckVhY2goKGZpbGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGpvYiA9IG5ldyBGaWxlQ2h1bmtVcGxvYWRlcihcbiAgICAgICAgICAgICAgICB1cGxvYWRTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIGZpbGUuZmlsZS5uYW1lLFxuICAgICAgICAgICAgICAgIGZpbGUuZmlsZS5zaXplLFxuICAgICAgICAgICAgICAgIGZpbGUuZW5jcnlwdGVkRmlsZSxcbiAgICAgICAgICAgICAgICBmaWxlLmNoZWNrc3VtLFxuICAgICAgICAgICAgICAgIGZpbGUuZmlsZS50eXBlLFxuICAgICAgICAgICAgICAgIGZpbGUuc3ltbWV0cmljYWxLZXksXG4gICAgICAgICAgICAgICAgZmlsZS5pdixcbiAgICAgICAgICAgICAgICBmaWxlLnNhdmVMb2NhdGlvblN0cmF0ZWd5XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgam9iLm9uUHJvZ3Jlc3MoKCkgPT4gdGhpcy5lbWl0KFwicHJvZ3Jlc3NcIiwgdGhpcy5nZXRQcm9ncmVzcygpKSk7XG4gICAgICAgICAgICBqb2Iub25FcnJvcigoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9ycy5wdXNoKGVycm9yKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoXCJlcnJvclwiLCB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBqb2IuZ2V0SWQoKSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGpvYi5vbkZpbmlzaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KFwicHJvZ3Jlc3NcIiwgdGhpcy5nZXRQcm9ncmVzcygpKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmpvYnNSZW1haW5pbmcgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KFwiZmluaXNoXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmpvYnNBcnJheS5wdXNoKGpvYik7XG4gICAgICAgICAgICB0aGlzLmpvYnNbam9iLmdldElkKCldID0gdGhpcy5qb2JzQXJyYXlbaW5kZXhdO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGFydChjYWxsYmFjazogKGVycikgPT4gdm9pZCkge1xuICAgICAgICBjb25zdCBwcm9taXNlcyA9IFtdO1xuICAgICAgICB0aGlzLmpvYnNBcnJheS5mb3JFYWNoKChqb2IpID0+IHtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2goXG4gICAgICAgICAgICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoam9iLnN0YXJ0KCkpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcblxuICAgICAgICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoXCJzdGFydFwiLCB0aGlzLmdldEpvYnMoKSk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdChcImVycm9yXCIsIGVycik7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBnZXRKb2JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JzQXJyYXk7XG4gICAgfVxuXG4gICAgZ2V0Sm9iKGlkOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmpvYnNbaWRdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmpvYnNbaWRdO1xuICAgIH1cblxuICAgIGdldFByb2dyZXNzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG90YWw6IHRoaXMudG90YWxKb2JzLFxuICAgICAgICAgICAgcGVyY2VudDogdGhpcy5wZXJjZW50YWdlLFxuICAgICAgICAgICAgY29tcGxldGVkOiB0aGlzLmpvYnNDb21wbGV0ZWQsXG4gICAgICAgICAgICByZW1haW5pbmc6IHRoaXMuam9ic1JlbWFpbmluZyxcbiAgICAgICAgICAgIGVycm9yczogdGhpcy5lcnJvcnMsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgb25TdGFydChjYWxsYmFjaykge1xuICAgICAgICB0aGlzLm9uKFwic3RhcnRcIiwgY2FsbGJhY2spO1xuICAgIH1cblxuICAgIG9uUHJvZ3Jlc3MoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5vbihcInByb2dyZXNzXCIsIGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICBvbkZpbmlzaChjYWxsYmFjaykge1xuICAgICAgICB0aGlzLm9uKFwiZmluaXNoXCIsIGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICBvbkVycm9yKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMub24oXCJlcnJvclwiLCBjYWxsYmFjayk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSBcImJ1ZmZlclwiO1xuXG5pbXBvcnQgY29uZmlndXJhdGlvbiBmcm9tIFwiLi4vLi4vY29uZmlndXJhdGlvblwiO1xuaW1wb3J0IGNyZWRlbnRpYWxzIGZyb20gXCIuLi8uLi9jcmVkZW50aWFsc1wiO1xuXG5pbnRlcmZhY2UgRmV0Y2hFeHRlbnNpb25zT3B0aW9ucyB7XG4gICAgLy8gVGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzIGFyZSBub2RlLWZldGNoIGV4dGVuc2lvbnNcbiAgICBmb2xsb3c/OiBudW1iZXI7IC8vIG1heGltdW0gcmVkaXJlY3QgY291bnQuIDAgdG8gbm90IGZvbGxvdyByZWRpcmVjdFxuICAgIHRpbWVvdXQ/OiBudW1iZXI7IC8vIHJlcS9yZXMgdGltZW91dCBpbiBtcywgaXQgcmVzZXRzIG9uIHJlZGlyZWN0LiAwIHRvIGRpc2FibGUgKE9TIGxpbWl0IGFwcGxpZXMpLiBTaWduYWwgaXMgcmVjb21tZW5kZWQgaW5zdGVhZC5cbiAgICBjb21wcmVzcz86IGJvb2xlYW47IC8vIHN1cHBvcnQgZ3ppcC9kZWZsYXRlIGNvbnRlbnQgZW5jb2RpbmcuIGZhbHNlIHRvIGRpc2FibGVcbiAgICBzaXplPzogbnVtYmVyOyAvLyBtYXhpbXVtIHJlc3BvbnNlIGJvZHkgc2l6ZSBpbiBieXRlcy4gMCB0byBkaXNhYmxlXG4gICAgYWdlbnQ/OiBudWxsOyAvLyBodHRwKHMpLkFnZW50IGluc3RhbmNlIG9yIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBpbnN0YW5jZVxufVxuXG4vLyBvbmx5IG1ldGhvZCBpcyByZXF1aXJlZCAoZS5nLiBpZiB3ZSB3YW5uYSBnZXQgYSBmaWxlIHZpYSBhIGRpcmVjdCB1cmwpXG5pbnRlcmZhY2UgUmVxdWVzdE9wdGlvbnMge1xuICAgIG1ldGhvZD86IHN0cmluZztcbiAgICAvLyByZXF1ZXN0IGhlYWRlcnMuIGZvcm1hdCBpcyB0aGUgaWRlbnRpY2FsIHRvIHRoYXQgYWNjZXB0ZWQgYnkgdGhlIEhlYWRlcnMgY29uc3RydWN0b3IgKHNlZSBiZWxvdylcbiAgICBoZWFkZXJzPzogYW55O1xuICAgIC8vIHJlcXVlc3QgYm9keS4gY2FuIGJlIG51bGwsIGEgc3RyaW5nLCBhIEJ1ZmZlciwgYSBCbG9iLCBvciBhIE5vZGUuanMgUmVhZGFibGUgc3RyZWFtXG4gICAgYm9keT86IGFueTtcbiAgICAvLyBzZXQgdG8gYG1hbnVhbGAgdG8gZXh0cmFjdCByZWRpcmVjdCBoZWFkZXJzLCBgZXJyb3JgIHRvIHJlamVjdCByZWRpcmVjdFxuICAgIHJlZGlyZWN0PzogXCJmb2xsb3dcIiB8IFwibWFudWFsXCIgfCBcImVycm9yXCI7XG4gICAgLy8gcGFzcyBhbiBpbnN0YW5jZSBvZiBBYm9ydFNpZ25hbCB0byBvcHRpb25hbGx5IGFib3J0IHJlcXVlc3RzXG4gICAgc2lnbmFsPzogYW55O1xufVxuXG4vLyBub2RlLWZldGNoIHN0YW5kYXJkIG9wdGlvbnMsIGV4dGVuZHMgUmVxdWVzdE9wdGlvbnMgc28gd2UgY2FuIGNhc3RcbmludGVyZmFjZSBGZXRjaE9wdGlvbnMge1xuICAgIG1ldGhvZDogc3RyaW5nO1xuICAgIGhlYWRlcnM6IGFueTtcbiAgICAvLyByZXF1ZXN0IGJvZHkuIGNhbiBiZSBudWxsLCBhIHN0cmluZywgYSBCdWZmZXIsIGEgQmxvYiwgb3IgYSBOb2RlLmpzIFJlYWRhYmxlIHN0cmVhbVxuICAgIGJvZHk6IHN0cmluZyB8IEJ1ZmZlciB8IEJsb2IgfCBSZWFkYWJsZVN0cmVhbSB8IG51bGw7XG4gICAgLy8gc2V0IHRvIGBtYW51YWxgIHRvIGV4dHJhY3QgcmVkaXJlY3QgaGVhZGVycywgYGVycm9yYCB0byByZWplY3QgcmVkaXJlY3RcbiAgICByZWRpcmVjdDogXCJmb2xsb3dcIiB8IFwibWFudWFsXCIgfCBcImVycm9yXCI7XG4gICAgc2lnbmFsOiBhbnk7IC8vIHBhc3MgYW4gaW5zdGFuY2Ugb2YgQWJvcnRTaWduYWwgdG8gb3B0aW9uYWxseSBhYm9ydCByZXF1ZXN0c1xuXG4gICAgZm9sbG93OiBudW1iZXI7IC8vIG1heGltdW0gcmVkaXJlY3QgY291bnQuIDAgdG8gbm90IGZvbGxvdyByZWRpcmVjdFxuICAgIHRpbWVvdXQ6IG51bWJlcjsgLy8gcmVxL3JlcyB0aW1lb3V0IGluIG1zLCBpdCByZXNldHMgb24gcmVkaXJlY3QuIDAgdG8gZGlzYWJsZSAoT1MgbGltaXQgYXBwbGllcykuIFNpZ25hbCBpcyByZWNvbW1lbmRlZCBpbnN0ZWFkLlxuICAgIGNvbXByZXNzOiBib29sZWFuOyAvLyBzdXBwb3J0IGd6aXAvZGVmbGF0ZSBjb250ZW50IGVuY29kaW5nLiBmYWxzZSB0byBkaXNhYmxlXG4gICAgc2l6ZTogbnVtYmVyOyAvLyBtYXhpbXVtIHJlc3BvbnNlIGJvZHkgc2l6ZSBpbiBieXRlcy4gMCB0byBkaXNhYmxlXG4gICAgYWdlbnQ6IG51bGw7IC8vIGh0dHAocykuQWdlbnQgaW5zdGFuY2Ugb3IgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIGluc3RhbmNlXG59XG5cbmNvbnN0IGV4ZWN1dGUgPSBhc3luYyAoXG4gICAgdXJsOiBzdHJpbmcsXG4gICAgb3B0czogUmVxdWVzdE9wdGlvbnMsXG4gICAgY2FsbGJhY2s/OiAoZXJyOiBFcnJvciB8IHN0cmluZywgZGF0YTogYW55KSA9PiB2b2lkXG4pID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgICAgIGAke2NvbmZpZ3VyYXRpb24uZ2V0KCkuaHR0cC5iYXNlVVJMfSR7dXJsfWAsXG4gICAgICAgICAgICBvcHRzXG4gICAgICAgICk7XG4gICAgICAgIGlmICghcmVzdWx0Lm9rKSB7XG4gICAgICAgICAgICB0aHJvdyByZXN1bHQ7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzdWx0Lmpzb24oKTtcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhW1wic3RhdHVzQ29kZVwiXSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCByZXNwb25zZVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIGRhdGEucGF5bG9hZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGF0YS5wYXlsb2FkO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn07XG5cbmNsYXNzIEh0dHBIZWxwZXIge1xuICAgIHByaXZhdGUgc2V0SGVhZGVycyhoZWFkZXJzOiBhbnkpIHtcbiAgICAgICAgY29uc3QgbXlIZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcblxuICAgICAgICBteUhlYWRlcnMuYXBwZW5kKFxuICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCIsXG4gICAgICAgICAgICBgQmVhcmVyICR7Y3JlZGVudGlhbHMuZ2V0KCkuaWRUb2tlbn1gXG4gICAgICAgICk7XG4gICAgICAgIGlmICh0eXBlb2YgaGVhZGVycyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIGhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICBteUhlYWRlcnMuYXBwZW5kKGtleSwgaGVhZGVyc1trZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhteUhlYWRlcnMpO1xuICAgICAgICByZXR1cm4gbXlIZWFkZXJzO1xuICAgIH1cblxuICAgIC8vIHNldHRpbmcgZGVmYXVsdCB2YWx1ZXMgLSBub3QgdXNpbmcgbm9kZS1mZXRjaCBleHRlbnNpb25zIHByb3BlcnRpZXMgYXRtXG4gICAgcHJpdmF0ZSBzZXRGZXRjaFJlcXVlc3RPcHRpb25zKFxuICAgICAgICB0eXBlOiBzdHJpbmcsXG4gICAgICAgIG9wdHM6IFJlcXVlc3RPcHRpb25zLFxuICAgICAgICBleHRPcHRzOiBGZXRjaEV4dGVuc2lvbnNPcHRpb25zID0ge31cbiAgICApIHtcbiAgICAgICAgY29uc3QgcmVxT3B0czogRmV0Y2hPcHRpb25zID0ge1xuICAgICAgICAgICAgbWV0aG9kOiB0eXBlIHx8IFwiR0VUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLnNldEhlYWRlcnMob3B0cy5oZWFkZXJzKSxcbiAgICAgICAgICAgIGJvZHk6IG9wdHMuYm9keSB8fCBudWxsLFxuICAgICAgICAgICAgcmVkaXJlY3Q6IG9wdHMucmVkaXJlY3QgfHwgXCJmb2xsb3dcIixcbiAgICAgICAgICAgIHNpZ25hbDogb3B0cy5zaWduYWwgfHwgbnVsbCxcbiAgICAgICAgICAgIGZvbGxvdzogZXh0T3B0cy5mb2xsb3cgfHwgMjAsXG4gICAgICAgICAgICB0aW1lb3V0OiBleHRPcHRzLnRpbWVvdXQgfHwgMCxcbiAgICAgICAgICAgIGNvbXByZXNzOiBleHRPcHRzLmNvbXByZXNzIHx8IHRydWUsXG4gICAgICAgICAgICBzaXplOiBleHRPcHRzLnNpemUgfHwgMCxcbiAgICAgICAgICAgIGFnZW50OiBleHRPcHRzLmFnZW50IHx8IG51bGwsXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHJlcU9wdHM7XG4gICAgfVxuXG4gICAgZ2V0KFxuICAgICAgICB1cmw6IHN0cmluZyxcbiAgICAgICAgb3B0cz86IFJlcXVlc3RPcHRpb25zLFxuICAgICAgICBjYWxsYmFjaz86IChlcnI6IEVycm9yIHwgc3RyaW5nLCBkYXRhOiBhbnkpID0+IHZvaWRcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIGV4ZWN1dGUodXJsLCB0aGlzLnNldEZldGNoUmVxdWVzdE9wdGlvbnMoXCJHRVRcIiwgb3B0cyksIGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICBwb3N0KFxuICAgICAgICB1cmw6IHN0cmluZyxcbiAgICAgICAgZGF0YTogYW55LFxuICAgICAgICBvcHRzPzogUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgIGNhbGxiYWNrPzogKGVycjogRXJyb3IgfCBzdHJpbmcsIGRhdGE6IGFueSkgPT4gdm9pZFxuICAgICkge1xuICAgICAgICBvcHRzID0geyAuLi5vcHRzLCBib2R5OiBkYXRhIH07XG4gICAgICAgIHJldHVybiBleGVjdXRlKFxuICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgdGhpcy5zZXRGZXRjaFJlcXVlc3RPcHRpb25zKFwiUE9TVFwiLCBvcHRzKSxcbiAgICAgICAgICAgIGNhbGxiYWNrXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHV0KFxuICAgICAgICB1cmw6IHN0cmluZyxcbiAgICAgICAgZGF0YTogYW55LFxuICAgICAgICBvcHRzPzogUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgIGNhbGxiYWNrPzogKGVycjogRXJyb3IgfCBzdHJpbmcsIGRhdGE6IGFueSkgPT4gdm9pZFxuICAgICkge1xuICAgICAgICBvcHRzID0geyAuLi5vcHRzLCBib2R5OiBkYXRhIH07XG4gICAgICAgIHJldHVybiBleGVjdXRlKHVybCwgdGhpcy5zZXRGZXRjaFJlcXVlc3RPcHRpb25zKFwiUFVUXCIsIG9wdHMpLCBjYWxsYmFjayk7XG4gICAgfVxuXG4gICAgcGF0Y2goXG4gICAgICAgIHVybDogc3RyaW5nLFxuICAgICAgICBkYXRhOiBhbnksXG4gICAgICAgIG9wdHM/OiBSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgY2FsbGJhY2s/OiAoZXJyOiBFcnJvciB8IHN0cmluZywgZGF0YTogYW55KSA9PiB2b2lkXG4gICAgKSB7XG4gICAgICAgIG9wdHMgPSB7IC4uLm9wdHMsIGJvZHk6IGRhdGEgfTtcbiAgICAgICAgcmV0dXJuIGV4ZWN1dGUoXG4gICAgICAgICAgICB1cmwsXG4gICAgICAgICAgICB0aGlzLnNldEZldGNoUmVxdWVzdE9wdGlvbnMoXCJQQVRDSFwiLCBvcHRzKSxcbiAgICAgICAgICAgIGNhbGxiYWNrXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZGVsZXRlKFxuICAgICAgICB1cmw6IHN0cmluZyxcbiAgICAgICAgb3B0czogUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgIGNhbGxiYWNrPzogKGVycjogRXJyb3IgfCBzdHJpbmcsIGRhdGE6IGFueSkgPT4gdm9pZFxuICAgICkge1xuICAgICAgICByZXR1cm4gZXhlY3V0ZShcbiAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgIHRoaXMuc2V0RmV0Y2hSZXF1ZXN0T3B0aW9ucyhcIkRFTEVURVwiLCBvcHRzKSxcbiAgICAgICAgICAgIGNhbGxiYWNrXG4gICAgICAgICk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgSHR0cEhlbHBlcigpO1xuIiwiaW1wb3J0IGh0dHBDbGllbnQgZnJvbSBcIi4uLy4uL3NoYXJlZC9oZWxwZXJzL2h0dHBjbGllbnRcIjtcbmltcG9ydCBjb25maWd1cmF0aW9uIGZyb20gXCIuLi8uLi9jb25maWd1cmF0aW9uXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVN0aXJkaWVLZXlNYW5hZ2VtZW50U2VydmljZSB7XG4gICAgZ2V0UHVibGljS2V5KHVzZXI6IHN0cmluZyk6IFByb21pc2U8YW55PjtcbiAgICBnZXRQcml2YXRlS2V5KCk6IFByb21pc2U8YW55Pjtcbn1cblxuY2xhc3MgU3RpcmRpZUtleU1hbmFnZW1lbnRTZXJ2aWNlIGltcGxlbWVudHMgSVN0aXJkaWVLZXlNYW5hZ2VtZW50U2VydmljZSB7XG4gICAgZ2V0UHVibGljS2V5KHVzZXI6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBodHRwQ2xpZW50LmdldChcbiAgICAgICAgICAgICAgICBgJHtjb25maWd1cmF0aW9uXG4gICAgICAgICAgICAgICAgICAgIC5nZXQoKVxuICAgICAgICAgICAgICAgICAgICAuaHR0cC5rZXlzLnB1YmxpY0tleS5yZXBsYWNlKFwiOmlkXCIsIHVzZXIpfWAsXG4gICAgICAgICAgICAgICAge30sXG4gICAgICAgICAgICAgICAgKGVyciwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRQcml2YXRlS2V5KCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBodHRwQ2xpZW50LmdldChcbiAgICAgICAgICAgICAgICBgJHtjb25maWd1cmF0aW9uLmdldCgpLmh0dHAua2V5cy5wcml2YXRlS2V5fWAsXG4gICAgICAgICAgICAgICAge30sXG4gICAgICAgICAgICAgICAgKGVyciwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBTdGlyZGllS2V5TWFuYWdlbWVudFNlcnZpY2UoKTtcbiIsImltcG9ydCBodHRwQ2xpZW50IGZyb20gXCIuLi8uLi9zaGFyZWQvaGVscGVycy9odHRwY2xpZW50XCI7XG5pbXBvcnQgY29uZmlndXJhdGlvbiBmcm9tIFwiLi4vLi4vY29uZmlndXJhdGlvblwiO1xuaW1wb3J0IHtcbiAgICBJVXBsb2FkSW5pdFBhcmFtcyxcbiAgICBJVXBsb2FkUGFydFBhcmFtcyxcbiAgICBJVXBsb2FkU2VydmljZSxcbn0gZnJvbSBcIi4uLy4uL3NoYXJlZC9zZXJ2aWNlcy91cGxvYWQuc2VydmljZVwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIElTdGlyZGllU3RvcmFnZVNlcnZpY2Uge1xuICAgIGdldChpZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+O1xuICAgIGxpc3QoZm9sZGVyOiBzdHJpbmcpOiBQcm9taXNlPGFueT47XG4gICAgY29weShpZDogc3RyaW5nLCBjb3B5TG9jYXRpb246IHN0cmluZyk6IFByb21pc2U8YW55PjtcbiAgICBtb3ZlKGlkOiBzdHJpbmcsIG1vdmVMb2NhdGlvbjogc3RyaW5nKTogUHJvbWlzZTxhbnk+O1xuICAgIGRlbGV0ZShpZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+O1xufVxuXG5jbGFzcyBTdGlyZGllU3RvcmFnZVNlcnZpY2UgaW1wbGVtZW50cyBJU3RpcmRpZVN0b3JhZ2VTZXJ2aWNlLCBJVXBsb2FkU2VydmljZSB7XG4gICAgdXBsb2FkSW5pdChwYXJhbXM6IElVcGxvYWRJbml0UGFyYW1zKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGh0dHBDbGllbnQucG9zdChcbiAgICAgICAgICAgICAgICBgJHtjb25maWd1cmF0aW9uXG4gICAgICAgICAgICAgICAgICAgIC5nZXQoKVxuICAgICAgICAgICAgICAgICAgICAuaHR0cC5zdG9yYWdlLnVwbG9hZEluaXRpYWxpc2UucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiOmlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMuZmlsZUlkXG4gICAgICAgICAgICAgICAgICAgICl9YCxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGZvbGRlcklkOiBwYXJhbXMuc2F2ZUxvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogcGFyYW1zLmZpbGVuYW1lLFxuICAgICAgICAgICAgICAgICAgICBzaXplOiBwYXJhbXMuc2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgc3ltS2V5OiBwYXJhbXMuc3ltS2V5LFxuICAgICAgICAgICAgICAgICAgICBpdjogcGFyYW1zLml2LFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50TUQ1OiBwYXJhbXMuY29udGVudE1ENSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IHBhcmFtcy5jb250ZW50VHlwZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHt9LFxuICAgICAgICAgICAgICAgIChlcnIsIGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdXBsb2FkUGFydChwYXJhbXM6IElVcGxvYWRQYXJ0UGFyYW1zKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAgICAgXCJ1cGxvYWRlci1maWxlLWlkXCI6IHBhcmFtcy5maWxlSWQsXG4gICAgICAgICAgICAgICAgXCJ1cGxvYWRlci1jaHVua3MtdG90YWxcIjogcGFyYW1zLnRvdGFsLFxuICAgICAgICAgICAgICAgIFwidXBsb2FkZXItY2h1bmstbnVtYmVyXCI6IHBhcmFtcy5udW0sXG4gICAgICAgICAgICAgICAgXCJ1cGxvYWRlci1jaHVuay1oYXNoXCI6IHBhcmFtcy5oYXNoLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaHR0cENsaWVudC5wb3N0KFxuICAgICAgICAgICAgICAgIGAke2NvbmZpZ3VyYXRpb24uZ2V0KCkuaHR0cC5zdG9yYWdlLnVwbG9hZFBhcnR9YCxcbiAgICAgICAgICAgICAgICBwYXJhbXMuZmlsZSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAoZXJyLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldChpZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGh0dHBDbGllbnQuZ2V0KFxuICAgICAgICAgICAgICAgIGAke2NvbmZpZ3VyYXRpb24uZ2V0KCkuaHR0cC5zdG9yYWdlLmdldC5yZXBsYWNlKFwiOmlkXCIsIGlkKX1gLFxuICAgICAgICAgICAgICAgIHt9LFxuICAgICAgICAgICAgICAgIChlcnIsIGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgbGlzdChmb2xkZXI6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBodHRwQ2xpZW50LmdldChcbiAgICAgICAgICAgICAgICBgJHtjb25maWd1cmF0aW9uLmdldCgpLmh0dHAuc3RvcmFnZS5saXN0fT9mb2xkZXI9JHtmb2xkZXJ9YCxcbiAgICAgICAgICAgICAgICB7fSxcbiAgICAgICAgICAgICAgICAoZXJyLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvcHkoaWQ6IHN0cmluZywgY29weUxvY2F0aW9uOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgaHR0cENsaWVudC5wdXQoXG4gICAgICAgICAgICAgICAgYCR7Y29uZmlndXJhdGlvbi5nZXQoKS5odHRwLnN0b3JhZ2UuY29weS5yZXBsYWNlKFwiOmlkXCIsIGlkKX1gLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiBjb3B5TG9jYXRpb24sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7fSxcbiAgICAgICAgICAgICAgICAoZXJyLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG1vdmUoaWQ6IHN0cmluZywgbW92ZUxvY2F0aW9uOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgaHR0cENsaWVudC5wYXRjaChcbiAgICAgICAgICAgICAgICBgJHtjb25maWd1cmF0aW9uLmdldCgpLmh0dHAuc3RvcmFnZS5tb3ZlLnJlcGxhY2UoXCI6aWRcIiwgaWQpfWAsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6IG1vdmVMb2NhdGlvbixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHt9LFxuICAgICAgICAgICAgICAgIChlcnIsIGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZGVsZXRlKGlkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgaHR0cENsaWVudC5kZWxldGUoXG4gICAgICAgICAgICAgICAgYCR7Y29uZmlndXJhdGlvbi5nZXQoKS5odHRwLnN0b3JhZ2UuZGVsZXRlLnJlcGxhY2UoXCI6aWRcIiwgaWQpfWAsXG4gICAgICAgICAgICAgICAge30sXG4gICAgICAgICAgICAgICAgKGVyciwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBTdGlyZGllU3RvcmFnZVNlcnZpY2UoKTtcbiIsImltcG9ydCAqIGFzIG1kNSBmcm9tIFwiYmx1ZWltcC1tZDVcIjtcblxuZXhwb3J0IGRlZmF1bHQgKGNvbnRlbnRzKSA9PiB7XG4gICAgcmV0dXJuIG1kNShjb250ZW50cyk7XG59O1xuIiwiaW1wb3J0ICogYXMgYWxnbyBmcm9tIFwiLi9hbGdvXCI7XG5pbXBvcnQgeyBpbXBvcnRQcml2YXRlS2V5IH0gZnJvbSBcIi4vaW1wb3J0LWtleVwiO1xuXG5leHBvcnQgZGVmYXVsdCAob3B0czoge1xuICAgIGJ1ZmZlcjogQXJyYXlCdWZmZXI7IC8vIEVuY3J5cHRlZCBmaWxlXG4gICAgZW5jcnlwdGlvbktleTogQXJyYXlCdWZmZXI7IC8vIEVuY3J5cHRlZCBlbmNyeXB0aW9uIGtleVxuICAgIGl2OiBBcnJheUJ1ZmZlcjtcbiAgICBwZW06IHN0cmluZzsgLy8gUHJpdmF0ZSBrZXksIHVzZWQgdG8gZGVjcnlwdCBlbmNyeXB0aW9uIGtleVxufSkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZTxBcnJheUJ1ZmZlcj4oYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcHJpdmF0ZUtleSA9IGF3YWl0IGltcG9ydFByaXZhdGVLZXkob3B0cy5wZW0pO1xuXG4gICAgICAgICAgICAvLyBkZWNyeXB0IGVuY3J5cHRpb24ga2V5IHVzaW5nIHByaXZhdGUga2V5XG4gICAgICAgICAgICBjb25zdCBzeW1ldHJpY0tleSA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZGVjcnlwdChcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGFsZ28uUlNBX09BRVAsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwcml2YXRlS2V5LFxuICAgICAgICAgICAgICAgIG9wdHMuZW5jcnlwdGlvbktleVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gZGVjcnlwdCBmaWxlIGNvbnRlbnQgdXNpbmcgU3ltZXRyaWNhbCBrZXlcbiAgICAgICAgICAgIGNvbnN0IGFsZ29yaXRobSA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBhbGdvLkFFU19HQ00sXG4gICAgICAgICAgICAgICAgaXY6IG9wdHMuaXYsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgZGVjcnlwdGVkRmlsZSA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZGVjcnlwdChcbiAgICAgICAgICAgICAgICBhbGdvcml0aG0sXG4gICAgICAgICAgICAgICAgYXdhaXQgY3J5cHRvLnN1YnRsZS5pbXBvcnRLZXkoXG4gICAgICAgICAgICAgICAgICAgIFwicmF3XCIsXG4gICAgICAgICAgICAgICAgICAgIHN5bWV0cmljS2V5LFxuICAgICAgICAgICAgICAgICAgICBhbGdvLkFFU19HQ00sXG4gICAgICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgICAgIFtcImRlY3J5cHRcIl1cbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIG9wdHMuYnVmZmVyXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShkZWNyeXB0ZWRGaWxlKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuIiwiaW1wb3J0IHsgSVN0aXJkaWVTdG9yYWdlU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VzL3N0b3JhZ2Uuc2VydmljZVwiO1xuaW1wb3J0IHNlbmRKb2IgZnJvbSBcIi4vZnVuY3Rpb25zL3NlbmQtam9iXCI7XG5pbXBvcnQgcmV0cmlldmVKb2IgZnJvbSBcIi4vZnVuY3Rpb25zL3JldHJpZXZlLWpvYlwiO1xuaW1wb3J0IHsgVXBsb2FkSm9iIH0gZnJvbSBcIi4uL3NoYXJlZC9tb2RlbHMvdXBsb2FkLWpvYlwiO1xuXG5leHBvcnQgY2xhc3MgU3RpcmRpZVN0b3JhZ2Uge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgc3RvcmFnZVNlcnZpY2U6IElTdGlyZGllU3RvcmFnZVNlcnZpY2UpIHt9XG5cbiAgICB1cGxvYWQoXG4gICAgICAgIGZpbGVzOiBGaWxlW10sXG4gICAgICAgIGZvbGRlcklkOiBzdHJpbmcsXG4gICAgICAgIGNhbGxiYWNrOiAoZXJyLCB1cGxvYWRKb2I/OiBVcGxvYWRKb2IpID0+IHZvaWRcbiAgICApIHtcbiAgICAgICAgc2VuZEpvYihmaWxlcywgZm9sZGVySWQpXG4gICAgICAgICAgICAudGhlbigodXBsb2FkSm9iKSA9PiBjYWxsYmFjayhudWxsLCB1cGxvYWRKb2IpKVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIGRvd25sb2FkKGZpbGVJZDogc3RyaW5nLCBjYWxsYmFjazogKGVyciwgcmVzdWx0PykgPT4gdm9pZCkge1xuICAgICAgICByZXRyaWV2ZUpvYihmaWxlSWQpXG4gICAgICAgICAgICAudGhlbigoY29udGVudCkgPT4gY2FsbGJhY2sobnVsbCwgY29udGVudCkpXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiBjYWxsYmFjayhlcnJvcikpO1xuICAgIH1cblxuICAgIGdldChpZDogc3RyaW5nLCBjYWxsYmFjazogKGVyciwgcmVzdWx0PykgPT4gdm9pZCkge1xuICAgICAgICB0aGlzLnN0b3JhZ2VTZXJ2aWNlXG4gICAgICAgICAgICAuZ2V0KGlkKVxuICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4gY2FsbGJhY2sobnVsbCwgcmVzdWx0KSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG5cbiAgICBsaXN0KGZvbGRlcjogc3RyaW5nLCBjYWxsYmFjazogKGVyciwgcmVzdWx0PykgPT4gdm9pZCkge1xuICAgICAgICB0aGlzLnN0b3JhZ2VTZXJ2aWNlXG4gICAgICAgICAgICAubGlzdChmb2xkZXIpXG4gICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiBjYWxsYmFjayhudWxsLCByZXN1bHQpKVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIGNvcHkoaWQ6IHN0cmluZywgY29weUxvY2F0aW9uOiBzdHJpbmcsIGNhbGxiYWNrOiAoZXJyLCByZXN1bHQ/KSA9PiB2b2lkKSB7XG4gICAgICAgIHRoaXMuc3RvcmFnZVNlcnZpY2VcbiAgICAgICAgICAgIC5jb3B5KGlkLCBjb3B5TG9jYXRpb24pXG4gICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiBjYWxsYmFjayhudWxsLCByZXN1bHQpKVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIG1vdmUoaWQ6IHN0cmluZywgbW92ZUxvY2F0aW9uOiBzdHJpbmcsIGNhbGxiYWNrOiAoZXJyLCByZXN1bHQ/KSA9PiB2b2lkKSB7XG4gICAgICAgIHRoaXMuc3RvcmFnZVNlcnZpY2VcbiAgICAgICAgICAgIC5tb3ZlKGlkLCBtb3ZlTG9jYXRpb24pXG4gICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiBjYWxsYmFjayhudWxsLCByZXN1bHQpKVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIGRlbGV0ZShpZDogc3RyaW5nLCBjYWxsYmFjazogKGVyciwgcmVzdWx0PykgPT4gdm9pZCkge1xuICAgICAgICB0aGlzLnN0b3JhZ2VTZXJ2aWNlXG4gICAgICAgICAgICAuZGVsZXRlKGlkKVxuICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4gY2FsbGJhY2sobnVsbCwgcmVzdWx0KSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgZW5jcnlwdCBmcm9tIFwiLi4vLi4vc2hhcmVkL2hlbHBlcnMvY3J5cHRvL2VuY3J5cHRcIjtcbmltcG9ydCB7IGdlbmVyYXRlRW5jcnlwdGlvbktleSB9IGZyb20gXCIuLi8uLi9zaGFyZWQvaGVscGVycy9jcnlwdG8vZ2VuZXJhdGUta2V5XCI7XG5pbXBvcnQgeyBVcGxvYWRKb2IsIFVwbG9hZEpvYlBhcmFtcyB9IGZyb20gXCIuLi8uLi9zaGFyZWQvbW9kZWxzL3VwbG9hZC1qb2JcIjtcbmltcG9ydCBrbXMgZnJvbSBcIi4uLy4uL3NoYXJlZC9zZXJ2aWNlcy9rZXlzLnNlcnZpY2VcIjtcbmltcG9ydCBzdG9yYWdlU2VydmljZSBmcm9tIFwiLi4vc2VydmljZXMvc3RvcmFnZS5zZXJ2aWNlXCI7XG5pbXBvcnQgbWQ1IGZyb20gXCIuLi8uLi9zaGFyZWQvaGVscGVycy9jcnlwdG8vbWQ1XCI7XG5pbXBvcnQgeyBhcnJheUJ1ZmZlclRvU3RyaW5nIH0gZnJvbSBcIi4uLy4uL3NoYXJlZC9oZWxwZXJzL2NvbnZlcnNpb25cIjtcblxuZXhwb3J0IGRlZmF1bHQgKGZpbGVzOiBGaWxlW10sIGZvbGRlcklkOiBzdHJpbmcpOiBQcm9taXNlPFVwbG9hZEpvYj4gPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwcm9taXNlczogUHJvbWlzZTxVcGxvYWRKb2JQYXJhbXM+W10gPSBbXTtcblxuICAgICAgICAgICAgLy8gZ2V0IHB1YmxpYyBrZXlcbiAgICAgICAgICAgIGNvbnN0IHBlbSA9IGF3YWl0IGttcy5nZXRQdWJsaWNLZXkoXCJtZVwiKTtcblxuICAgICAgICAgICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlPFVwbG9hZEpvYlBhcmFtcz4oKHJlcywgcmVqKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGV2ZW50LnRhcmdldC5yZXN1bHQgYXMgQXJyYXlCdWZmZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hlY2tzdW0gPSBtZDUoYXJyYXlCdWZmZXJUb1N0cmluZyhjb250ZW50KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbmNyeXB0IGZpbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBhd2FpdCBnZW5lcmF0ZUVuY3J5cHRpb25LZXkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpdiA9IGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBVaW50OEFycmF5KDEyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5jcnlwdGVkID0gYXdhaXQgZW5jcnlwdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjogY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVtLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXBsb2FkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuY3J5cHRlZEZpbGU6IGVuY3J5cHRlZC5idWZmZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrc3VtLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ltbWV0cmljYWxLZXk6IGVuY3J5cHRlZC5rZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVMb2NhdGlvblN0cmF0ZWd5OiBmb2xkZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB1cGxvYWRKb2JzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShuZXcgVXBsb2FkSm9iKHVwbG9hZEpvYnMsIHN0b3JhZ2VTZXJ2aWNlKSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcbiIsImV4cG9ydCBjb25zdCBhcnJheUJ1ZmZlclRvU3RyaW5nID0gKGJ1ZmZlcjogQXJyYXlCdWZmZXIpOiBzdHJpbmcgPT4ge1xuICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIG5ldyBVaW50MTZBcnJheShidWZmZXIpKTtcbn07XG4iLCJpbXBvcnQgZGVjcnlwdCBmcm9tIFwiLi4vLi4vc2hhcmVkL2hlbHBlcnMvY3J5cHRvL2RlY3J5cHRcIjtcbmltcG9ydCBrbXMgZnJvbSBcIi4uLy4uL3NoYXJlZC9zZXJ2aWNlcy9rZXlzLnNlcnZpY2VcIjtcbmltcG9ydCB7IGJhc2U2NFRvQXJyYXlCdWZmZXIgfSBmcm9tIFwiLi4vLi4vc2hhcmVkL2hlbHBlcnMvY29udmVyc2lvblwiO1xuaW1wb3J0IHN0aXJkaWVTdG9yYWdlU2VydmljZSBmcm9tIFwiLi4vc2VydmljZXMvc3RvcmFnZS5zZXJ2aWNlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IChmaWxlSWQ6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBHZXQgZmlsZVxuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGF3YWl0IHN0aXJkaWVTdG9yYWdlU2VydmljZS5nZXQoZmlsZUlkKTtcblxuICAgICAgICAgICAgLy8gZ2V0IHByaXZhdGUga2V5XG4gICAgICAgICAgICBjb25zdCBwZW0gPSBhd2FpdCBrbXMuZ2V0UHJpdmF0ZUtleSgpO1xuXG4gICAgICAgICAgICAvLyBkZWNyeXB0IGZpbGVcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBkZWNyeXB0KHtcbiAgICAgICAgICAgICAgICBidWZmZXI6IG5ldyBVaW50OEFycmF5KGZpbGUuYnVmZmVyKS5idWZmZXIsXG4gICAgICAgICAgICAgICAgZW5jcnlwdGlvbktleTogYmFzZTY0VG9BcnJheUJ1ZmZlcihmaWxlLmVuY3J5cHRpb25LZXkpLFxuICAgICAgICAgICAgICAgIGl2OiBiYXNlNjRUb0FycmF5QnVmZmVyKGZpbGUuaXYpLFxuICAgICAgICAgICAgICAgIHBlbSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShjb250ZW50KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuIiwiaW1wb3J0IGh0dHBDbGllbnQgZnJvbSBcIi4uLy4uL3NoYXJlZC9oZWxwZXJzL2h0dHBjbGllbnRcIjtcbmltcG9ydCBjb25maWd1cmF0aW9uIGZyb20gXCIuLi8uLi9jb25maWd1cmF0aW9uXCI7XG5pbXBvcnQge1xuICAgIElVcGxvYWRJbml0UGFyYW1zLFxuICAgIElVcGxvYWRQYXJ0UGFyYW1zLFxuICAgIElVcGxvYWRTZXJ2aWNlLFxufSBmcm9tIFwiLi4vLi4vc2hhcmVkL3NlcnZpY2VzL3VwbG9hZC5zZXJ2aWNlXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVN0aXJkaWVUcmFuc2ZlclNlcnZpY2Uge1xuICAgIGdldFRyYW5zZmVyKHRyYW5zZmVySUQ6IHN0cmluZyk6IFByb21pc2U8YW55PjtcbiAgICBnZXRBY3Rpdml0eSgpOiBQcm9taXNlPGFueT47XG59XG5cbmNsYXNzIFN0aXJkaWVUcmFuc2ZlclNlcnZpY2VcbiAgICBpbXBsZW1lbnRzIElTdGlyZGllVHJhbnNmZXJTZXJ2aWNlLCBJVXBsb2FkU2VydmljZSB7XG4gICAgdXBsb2FkSW5pdChwYXJhbXM6IElVcGxvYWRJbml0UGFyYW1zKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGh0dHBDbGllbnQucG9zdChcbiAgICAgICAgICAgICAgICBgJHtjb25maWd1cmF0aW9uXG4gICAgICAgICAgICAgICAgICAgIC5nZXQoKVxuICAgICAgICAgICAgICAgICAgICAuaHR0cC50cmFuc2Zlci51cGxvYWRJbml0aWFsaXNlLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICBcIjppZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLnNhdmVMb2NhdGlvblxuICAgICAgICAgICAgICAgICAgICApfWAsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBmaWxlSWQ6IHBhcmFtcy5maWxlSWQsXG4gICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBwYXJhbXMuZmlsZW5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IHBhcmFtcy5zaXplLFxuICAgICAgICAgICAgICAgICAgICBzeW1LZXk6IHBhcmFtcy5zeW1LZXksXG4gICAgICAgICAgICAgICAgICAgIGl2OiBwYXJhbXMuaXYsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRNRDU6IHBhcmFtcy5jb250ZW50TUQ1LFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogcGFyYW1zLmNvbnRlbnRUeXBlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge30sXG4gICAgICAgICAgICAgICAgKGVyciwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB1cGxvYWRQYXJ0KHBhcmFtczogSVVwbG9hZFBhcnRQYXJhbXMpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICAgICAgICAgICBcInVwbG9hZGVyLWZpbGUtaWRcIjogcGFyYW1zLmZpbGVJZCxcbiAgICAgICAgICAgICAgICBcInVwbG9hZGVyLWNodW5rcy10b3RhbFwiOiBwYXJhbXMudG90YWwsXG4gICAgICAgICAgICAgICAgXCJ1cGxvYWRlci1jaHVuay1udW1iZXJcIjogcGFyYW1zLm51bSxcbiAgICAgICAgICAgICAgICBcInVwbG9hZGVyLWNodW5rLWhhc2hcIjogcGFyYW1zLmhhc2gsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBodHRwQ2xpZW50LnBvc3QoXG4gICAgICAgICAgICAgICAgYCR7Y29uZmlndXJhdGlvbi5nZXQoKS5odHRwLnN0b3JhZ2UudXBsb2FkUGFydH1gLFxuICAgICAgICAgICAgICAgIHBhcmFtcy5maWxlLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIChlcnIsIGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0VHJhbnNmZXIodHJhbnNmZXJJRDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGh0dHBDbGllbnQuZ2V0KFxuICAgICAgICAgICAgICAgIGAke2NvbmZpZ3VyYXRpb25cbiAgICAgICAgICAgICAgICAgICAgLmdldCgpXG4gICAgICAgICAgICAgICAgICAgIC5odHRwLnRyYW5zZmVyLmdldC5yZXBsYWNlKFwiOmlkXCIsIHRyYW5zZmVySUQpfWAsXG4gICAgICAgICAgICAgICAge30sXG4gICAgICAgICAgICAgICAgKGVyciwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRBY3Rpdml0eSgpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgaHR0cENsaWVudC5nZXQoXG4gICAgICAgICAgICAgICAgYCR7Y29uZmlndXJhdGlvbi5nZXQoKS5odHRwLnRyYW5zZmVyLmFjdGl2aXR5fWAsXG4gICAgICAgICAgICAgICAge30sXG4gICAgICAgICAgICAgICAgKGVyciwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBTdGlyZGllVHJhbnNmZXJTZXJ2aWNlKCk7XG4iLCJpbXBvcnQgc2VuZEpvYiBmcm9tIFwiLi9mdW5jdGlvbnMvc2VuZC1qb2JcIjtcbmltcG9ydCByZXRyaWV2ZUpvYiBmcm9tIFwiLi9mdW5jdGlvbnMvcmV0cmlldmUtam9iXCI7XG5pbXBvcnQgeyBJU3RpcmRpZVRyYW5zZmVyU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VzL3RyYW5zZmVyLnNlcnZpY2VcIjtcblxuZXhwb3J0IGNsYXNzIFN0aXJkaWVUcmFuZmVyIHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHRyYW5zZmVyU2VydmljZTogSVN0aXJkaWVUcmFuc2ZlclNlcnZpY2UpIHt9XG5cbiAgICBzZW5kKFxuICAgICAgICBmaWxlczogRmlsZVtdLFxuICAgICAgICBzZW5kVG9TdGlyZGllSUQ6IHN0cmluZyxcbiAgICAgICAgY2FsbGJhY2s6IChlcnIsIHJlc3VsdD8pID0+IHZvaWRcbiAgICApIHtcbiAgICAgICAgc2VuZEpvYihmaWxlcywgc2VuZFRvU3RpcmRpZUlEKVxuICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4gY2FsbGJhY2sobnVsbCwgcmVzdWx0KSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG5cbiAgICByZXRyaWV2ZSh0cmFuc2ZlcklEOiBzdHJpbmcsIGNhbGxiYWNrOiAoZXJyLCByZXN1bHQ/KSA9PiB2b2lkKSB7XG4gICAgICAgIHJldHJpZXZlSm9iKHRyYW5zZmVySUQpXG4gICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiBjYWxsYmFjayhudWxsLCByZXN1bHQpKVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNhbGxiYWNrKGVycikpO1xuICAgIH1cblxuICAgIGFjdGl2aXR5KGNhbGxiYWNrOiAoZXJyLCByZXN1bHQ/KSA9PiB2b2lkKSB7XG4gICAgICAgIHRoaXMudHJhbnNmZXJTZXJ2aWNlXG4gICAgICAgICAgICAuZ2V0QWN0aXZpdHkoKVxuICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4gY2FsbGJhY2sobnVsbCwgcmVzdWx0KSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjYWxsYmFjayhlcnIpKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgZW5jcnlwdCBmcm9tIFwiLi4vLi4vc2hhcmVkL2hlbHBlcnMvY3J5cHRvL2VuY3J5cHRcIjtcbmltcG9ydCB7IGdlbmVyYXRlRW5jcnlwdGlvbktleSB9IGZyb20gXCIuLi8uLi9zaGFyZWQvaGVscGVycy9jcnlwdG8vZ2VuZXJhdGUta2V5XCI7XG5pbXBvcnQgeyBVcGxvYWRKb2IsIFVwbG9hZEpvYlBhcmFtcyB9IGZyb20gXCIuLi8uLi9zaGFyZWQvbW9kZWxzL3VwbG9hZC1qb2JcIjtcbmltcG9ydCBrbXMgZnJvbSBcIi4uLy4uL3NoYXJlZC9zZXJ2aWNlcy9rZXlzLnNlcnZpY2VcIjtcbmltcG9ydCB0cmFuc2ZlclNlcnZpY2UgZnJvbSBcIi4uL3NlcnZpY2VzL3RyYW5zZmVyLnNlcnZpY2VcIjtcbmltcG9ydCBtZDUgZnJvbSBcIi4uLy4uL3NoYXJlZC9oZWxwZXJzL2NyeXB0by9tZDVcIjtcblxuZXhwb3J0IGRlZmF1bHQgKGZpbGVzOiBGaWxlW10sIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxVcGxvYWRKb2I+ID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcHJvbWlzZXM6IFByb21pc2U8VXBsb2FkSm9iUGFyYW1zPltdID0gW107XG5cbiAgICAgICAgICAgIC8vIGdldCBwdWJsaWMga2V5XG4gICAgICAgICAgICBjb25zdCBwZW0gPSBhd2FpdCBrbXMuZ2V0UHVibGljS2V5KHVzZXJJZCk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZTxVcGxvYWRKb2JQYXJhbXM+KChyZXMsIHJlaikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5vbmVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlaihlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGFzeW5jIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJpbmFyeSA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hlY2tzdW0gPSBtZDUoYmluYXJ5KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVuY3J5cHQgZmlsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IGdlbmVyYXRlRW5jcnlwdGlvbktleSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGl2ID0gY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFVpbnQ4QXJyYXkoMTIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuY3J5cHRlZCA9IGF3YWl0IGVuY3J5cHQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZmZXI6IGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl2LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwbG9hZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ZWRGaWxlOiBlbmNyeXB0ZWQuYnVmZmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja3N1bSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5bW1ldHJpY2FsS2V5OiBlbmNyeXB0ZWQua2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYXZlTG9jYXRpb25TdHJhdGVneTogdXNlcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0JpbmFyeVN0cmluZyhmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB1cGxvYWRKb2JzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShuZXcgVXBsb2FkSm9iKHVwbG9hZEpvYnMsIHRyYW5zZmVyU2VydmljZSkpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG4iLCJpbXBvcnQgZGVjcnlwdCBmcm9tIFwiLi4vLi4vc2hhcmVkL2hlbHBlcnMvY3J5cHRvL2RlY3J5cHRcIjtcbmltcG9ydCBrbXMgZnJvbSBcIi4uLy4uL3NoYXJlZC9zZXJ2aWNlcy9rZXlzLnNlcnZpY2VcIjtcbmltcG9ydCB7IGJhc2U2NFRvQXJyYXlCdWZmZXIgfSBmcm9tIFwiLi4vLi4vc2hhcmVkL2hlbHBlcnMvY29udmVyc2lvblwiO1xuaW1wb3J0IHN0aXJkaWVUcmFuc2ZlclNlcnZpY2UgZnJvbSBcIi4uL3NlcnZpY2VzL3RyYW5zZmVyLnNlcnZpY2VcIjtcblxuZXhwb3J0IGRlZmF1bHQgKHRyYW5zZmVySUQ6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBkb3dubG9hZCBmaWxlXG4gICAgICAgICAgICBjb25zdCBmaWxlID0gYXdhaXQgc3RpcmRpZVRyYW5zZmVyU2VydmljZS5nZXRUcmFuc2Zlcih0cmFuc2ZlcklEKTtcblxuICAgICAgICAgICAgLy8gZ2V0IHByaXZhdGUga2V5XG4gICAgICAgICAgICBjb25zdCBwZW0gPSBhd2FpdCBrbXMuZ2V0UHJpdmF0ZUtleSgpO1xuXG4gICAgICAgICAgICAvLyBkZWNyeXB0IGZpbGVcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBkZWNyeXB0KHtcbiAgICAgICAgICAgICAgICBidWZmZXI6IG5ldyBVaW50OEFycmF5KGZpbGUuYnVmZmVyKS5idWZmZXIsXG4gICAgICAgICAgICAgICAgZW5jcnlwdGlvbktleTogYmFzZTY0VG9BcnJheUJ1ZmZlcihmaWxlLmVuY3J5cHRpb25LZXkpLFxuICAgICAgICAgICAgICAgIGl2OiBiYXNlNjRUb0FycmF5QnVmZmVyKGZpbGUuaXYpLFxuICAgICAgICAgICAgICAgIHBlbSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShjb250ZW50KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuIiwiaW1wb3J0IGNvbmZpZ3VyYXRpb24gZnJvbSBcIi4vY29uZmlndXJhdGlvblwiO1xuaW1wb3J0IGNyZWRlbnRpYWxzLCB7IENyZWRlbnRpYWxzIH0gZnJvbSBcIi4vY3JlZGVudGlhbHNcIjtcbmltcG9ydCB7IFN0aXJkaWVLZXlNYW5hZ2VtZW50IH0gZnJvbSBcIi4va2V5c1wiO1xuaW1wb3J0IHsgU3RpcmRpZVN0b3JhZ2UgfSBmcm9tIFwiLi9zdG9yYWdlXCI7XG5pbXBvcnQgeyBTdGlyZGllVHJhbmZlciB9IGZyb20gXCIuL3RyYW5zZmVyXCI7XG5cbmltcG9ydCBrZXlNYW5hZ2VtZW50U2VydmljZSBmcm9tIFwiLi9zaGFyZWQvc2VydmljZXMva2V5cy5zZXJ2aWNlXCI7XG5pbXBvcnQgc3RvcmFnZVNlcnZpY2UgZnJvbSBcIi4vc3RvcmFnZS9zZXJ2aWNlcy9zdG9yYWdlLnNlcnZpY2VcIjtcbmltcG9ydCB0cmFuc2ZlclNlcnZpY2UgZnJvbSBcIi4vdHJhbnNmZXIvc2VydmljZXMvdHJhbnNmZXIuc2VydmljZVwiO1xuXG5leHBvcnQgY2xhc3MgU3RpcmRpZSB7XG4gICAgc3RvcmFnZTogU3RpcmRpZVN0b3JhZ2U7XG4gICAgdHJhbnNmZXI6IFN0aXJkaWVUcmFuZmVyO1xuICAgIGtleXM6IFN0aXJkaWVLZXlNYW5hZ2VtZW50O1xuXG4gICAgY29uc3RydWN0b3IoY3JlZHM6IENyZWRlbnRpYWxzLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgY3JlZGVudGlhbHMuc2V0KGNyZWRzKTtcbiAgICAgICAgY29uZmlndXJhdGlvbi5zZXQob3B0aW9ucyk7XG4gICAgICAgIHRoaXMua2V5cyA9IG5ldyBTdGlyZGllS2V5TWFuYWdlbWVudChrZXlNYW5hZ2VtZW50U2VydmljZSk7XG4gICAgICAgIHRoaXMuc3RvcmFnZSA9IG5ldyBTdGlyZGllU3RvcmFnZShzdG9yYWdlU2VydmljZSk7XG4gICAgICAgIHRoaXMudHJhbnNmZXIgPSBuZXcgU3RpcmRpZVRyYW5mZXIodHJhbnNmZXJTZXJ2aWNlKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTdGlyZGllIGFzIFN0aXJkaWVNYWluIH0gZnJvbSBcIi4vc3RpcmRpZVwiO1xuaW1wb3J0IHsgQ3JlZGVudGlhbHMgfSBmcm9tIFwiLi9zdGlyZGllL2NyZWRlbnRpYWxzXCI7XG5pbXBvcnQgeyBJQ29uZmlnIH0gZnJvbSBcIi4vc3RpcmRpZS9jb25maWd1cmF0aW9uXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBTdGlyZGllKFxuICAgIGNyZWRlbnRpYWxzOiBDcmVkZW50aWFscyxcbiAgICBjb25maWc6IFBhcnRpYWw8SUNvbmZpZz4sXG4gICAgY2FsbGJhY2s6IChlcnI6IEVycm9yIHwgc3RyaW5nLCBzdGlyZGllPzogU3RpcmRpZU1haW4pID0+IHZvaWRcbikge1xuICAgIGNhbGxiYWNrKG51bGwsIG5ldyBTdGlyZGllTWFpbihjcmVkZW50aWFscywgY29uZmlnKSk7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9